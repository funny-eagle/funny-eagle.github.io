{"componentChunkName":"component---src-templates-blog-post-js","path":"/arts-17/","result":{"data":{"site":{"siteMetadata":{"title":"Funny Eagle","author":"Jason Yang"}},"markdownRemark":{"id":"6e153305-4da9-52f3-87a7-792e7c9d81ec","excerpt":"Algorithm: Remove Element Review: What is the Java 9 Module System? Tip: Mycat 原理 Share: 近期学习kafka和…","html":"<blockquote>\n<p>Algorithm: Remove Element</p>\n<p>Review: What is the Java 9 Module System?</p>\n<p>Tip: Mycat 原理</p>\n<p>Share: 近期学习kafka和分库分表的一些感受</p>\n</blockquote>\n<h2 id=\"algorithm\" style=\"position:relative;\"><a href=\"#algorithm\" aria-label=\"algorithm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Algorithm</h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>leetcode<span class=\"token punctuation\">.</span>solution</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">/**\r\n * 27.Remove Element\r\n *\r\n * Given an array nums and a value val, remove all instances of that value in-place and return the new length.\r\n *\r\n * Do not allocate extra space for another array, you must do this by modifying the input array in-place with O(1) extra memory.\r\n *\r\n * The order of elements can be changed. It doesn't matter what you leave beyond the new length.\r\n *\r\n * Example 1:\r\n *\r\n * Given nums = [3,2,2,3], val = 3,\r\n *\r\n * Your function should return length = 2, with the first two elements of nums being 2.\r\n *\r\n * It doesn't matter what you leave beyond the returned length.\r\n * Example 2:\r\n *\r\n * Given nums = [0,1,2,2,3,0,4,2], val = 2,\r\n *\r\n * Your function should return length = 5, with the first five elements of nums containing 0, 1, 3, 0, and 4.\r\n *\r\n * Note that the order of those five elements can be arbitrary.\r\n *\r\n * It doesn't matter what values are set beyond the returned length.\r\n * Clarification:\r\n *\r\n * Confused why the returned value is an integer but your answer is an array?\r\n *\r\n * Note that the input array is passed in by reference, which means modification to the input array will be known to the caller as well.\r\n *\r\n * Internally you can think of this:\r\n *\r\n * // nums is passed in by reference. (i.e., without making a copy)\r\n * int len = removeElement(nums, val);\r\n *\r\n * // any modification to nums in your function would be known by the caller.\r\n * // using the length returned by your function, it prints the first len elements.\r\n * for (int i = 0; i &lt; len; i++) {\r\n *     print(nums[i]);\r\n * }\r\n * @author jason\r\n * @date 2018/10/28.\r\n */</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RemoveElement</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">removeElement</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> nums<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> val<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>nums <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> nums<span class=\"token punctuation\">.</span>length <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        <span class=\"token keyword\">int</span> len <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> nums<span class=\"token punctuation\">.</span>length <span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>nums<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\r\n                nums<span class=\"token punctuation\">[</span>len<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> nums<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n                len <span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        <span class=\"token keyword\">return</span> len<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> nums <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">{</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">int</span> val <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token function\">removeElement</span><span class=\"token punctuation\">(</span>nums<span class=\"token punctuation\">,</span> val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n</code></pre></div>\n<h2 id=\"review\" style=\"position:relative;\"><a href=\"#review\" aria-label=\"review permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Review</h2>\n<h3 id=\"what-is-the-java-9-module-system\" style=\"position:relative;\"><a href=\"#what-is-the-java-9-module-system\" aria-label=\"what is the java 9 module system permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is the Java 9 Module System?</h3>\n<p><a href=\"https://medium.com/@nagillavenkatesh1234/what-is-the-java-9-module-system-2d07bfa00abf\">https://medium.com/@nagillavenkatesh1234/what-is-the-java-9-module-system-2d07bfa00abf</a></p>\n<h2 id=\"tip\" style=\"position:relative;\"><a href=\"#tip\" aria-label=\"tip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tip</h2>\n<p>Mycat 是什么?从定义和分类来看，它是一个开源的分布式数据库系统，是一个实现了 MySQL 协议的的 Server，前端用户可以把它看作是一个数据库代理，用 MySQL 客户端工具和命令行访问，而其后端可以用 MySQL 原生(Native)协议与多个 MySQL 服务器通信，也可以用 JDBC 协议与大多数主流数据库服务器通信， 其核心功能是分表分库，即将一个大表水平分割为 N 个小表，存储在后端 MySQL 服务器里或者其他数据库里。</p>\n<p>Mycat 的原理中最重要的一个动词是“拦截”，它拦截了用户发送过来的 SQL 语句，首先对 SQL 语句做了 一些特定的分析:如分片分析、路由分析、读写分离分析、缓存分析等，然后将此 SQL 发往后端的真实数据库， 并将返回的结果做适当的处理，最终再返回给用户。</p>\n<h2 id=\"share\" style=\"position:relative;\"><a href=\"#share\" aria-label=\"share permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Share</h2>\n<p>分享一下我最近在项目中运用kafka和学习分库分表的一些感受。</p>\n<p>我认为学习一项新的技术不是难点，难点在于和目前业务的结合，也就是如何解决实际问题。越来越深刻的感受到技术不能脱离业务，也没有完美的解决方案，如果认为我们的解决方案没有问题，那只是暂时没有发现而已。我们要找出更好的，更符合解决现状问题的方案，平衡各种方案的优劣势，从而更好的解决问题。</p>\n<p>为什么要用消息中间件，目的就是解耦。我们的子系统越来越多，各子系统之间的调用也越来越多，使用消息中间件可以更好的解决各个系统之间的依赖。并且后续访问量大了以后，可以使用消息中间件来做限流。</p>\n<p>为什么考虑分库分表，目前项目使用单库mysql存储数据，有部分表的数量达到了600多万，查询效率比较低，最近业务发展趋势比较好，后续这些表的数据可能会成倍增长，根据网上看的经验值，500万到1000万就要考虑是否分库分表。于是开始研究分库分表的东西，真的是不看不知道，一看吓一跳，要准备的东西太多了，分哪些表，按什么规则分，数据往那些表存，哪些需要存nosql数据库，分片数据查询，分布式事务。初步使用mycat数据库中间件来做个测试，目前刚了解了一点皮毛。想到前面那么多坑要踩，还是有点发憷哦。</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#algorithm\">Algorithm</a></p>\n</li>\n<li>\n<p><a href=\"#review\">Review</a></p>\n<ul>\n<li><a href=\"#what-is-the-java-9-module-system\">What is the Java 9 Module System?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#tip\">Tip</a></p>\n</li>\n<li>\n<p><a href=\"#share\">Share</a></p>\n</li>\n</ul>","frontmatter":{"title":"ARTS 第17周：移除元素算法、Java 9模块系统、Mycat原理与Kafka和分库分表学习心得","tags":["coding","arts"],"description":"本周ARTS包含LeetCode移除元素算法解析、Java 9模块系统分享、Mycat原理详解，以及Kafka和分库分表学习心得。","date":"2018-10-27"}}},"pageContext":{"slug":"/arts-17","previous":{"fields":{"slug":"/arts-16"},"frontmatter":{"title":"ARTS 第16周：单词拆分算法、Kafka客户端操作封装、Jenkins Pipeline定时清除Docker镜像与分库分表策略","tags":["coding","arts"],"slug":"/arts-16"}},"next":{"fields":{"slug":"/arts-18"},"frontmatter":{"title":"ARTS 第18周：反转字符串算法、数据库分片架构、Sharding-Sphere分库分表框架与MyCat分库分表实践","tags":["coding","arts"],"slug":"/arts-18"}}}},"staticQueryHashes":["2052298874"],"slicesMap":{}}