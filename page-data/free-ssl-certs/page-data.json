{"componentChunkName":"component---src-templates-blog-post-js","path":"/free-ssl-certs/","result":{"data":{"site":{"siteMetadata":{"title":"Jason Yang's Blog"}},"markdownRemark":{"id":"6f070c82-26a4-5229-a32c-a7c4070f9ace","excerpt":"Let's Encrypt是一个非营利性组织，旨在使HTTPS成为互联网的标准，他们提供免费HTTPS证书，以便更多的网站可以使用HTTPS加密保护用户的隐私和安全。 我们可以通过Certbot申请免费HTTPS证书，步骤如下： 安装Certbot：Certbot是Let's Encrypt…","html":"<p>Let's Encrypt是一个非营利性组织，旨在使HTTPS成为互联网的标准，他们提供免费HTTPS证书，以便更多的网站可以使用HTTPS加密保护用户的隐私和安全。</p>\n<p>我们可以通过Certbot申请免费HTTPS证书，步骤如下：</p>\n<ol>\n<li>安装Certbot：Certbot是Let's Encrypt的官方客户端，可自动化证书颁发和安装过程</li>\n<li>运行Certbot：运行Certbot以启动证书颁发和安装过程。</li>\n<li>等待证书颁发：Certbot将与Let's Encrypt服务器通信以颁发证书，需要几秒钟或几分钟。</li>\n<li>安装证书：Certbot将自动安装证书并配置您的Web服务器以使用HTTPS。</li>\n</ol>\n<p>注意，需要在每90天内更新证书。Certbot可以自动化此过程，因此无需手动更新证书。</p>\n<p>以下是具体命令，以<code>Ubuntu</code>、<code>Nginx</code>为例：</p>\n<ol>\n<li>安装Certbot</li>\n</ol>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">sudo apt install certbot</code>\n        </deckgo-highlight-code>\n<ol start=\"2\">\n<li>安装Certbot Nginx插件，</li>\n</ol>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">sudo apt install python3-certbot-nginx</code>\n        </deckgo-highlight-code>\n<blockquote>\n<p>如果用Apache，就安装Apache插件 `sudo apt install python3-certbot-apache</p>\n</blockquote>\n<ol start=\"3\">\n<li>使用certbot nginx 插件为域名申请证书</li>\n</ol>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">sudo certbot --nginx -d nocoder.org -d www.nocoder.org</code>\n        </deckgo-highlight-code>\n<deckgo-highlight-code language=\"shell\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">$ sudo certbot --nginx -d nocoder.org -d www.nocoder.org\r\nSaving debug log to /var/log/letsencrypt/letsencrypt.log\r\nPlugins selected: Authenticator nginx, Installer nginx\r\nEnter email address (used for urgent renewal and security notices)\r\n (Enter &#39;c&#39; to cancel): yangjinlong86@gmail.com\r\n\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\nPlease read the Terms of Service at\r\nhttps://letsencrypt.org/documents/LE-SA-v1.3-September-21-2022.pdf. You must\r\nagree in order to register with the ACME server. Do you agree?\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n(Y)es/(N)o: Y\r\n\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\nWould you be willing, once your first certificate is successfully issued, to\r\nshare your email address with the Electronic Frontier Foundation, a founding\r\npartner of the Let&#39;s Encrypt project and the non-profit organization that\r\ndevelops Certbot? We&#39;d like to send you email about our work encrypting the web,\r\nEFF news, campaigns, and ways to support digital freedom.\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n(Y)es/(N)o: Y\r\nAccount registered.\r\nRequesting a certificate for nocoder.org and www.nocoder.org\r\nPerforming the following challenges:\r\nhttp-01 challenge for nocoder.org\r\nhttp-01 challenge for www.nocoder.org\r\nWaiting for verification...\r\nCleaning up challenges\r\nDeploying Certificate to VirtualHost /etc/nginx/conf.d/nocoder.org.conf\r\nDeploying Certificate to VirtualHost /etc/nginx/conf.d/nocoder.org.conf\r\nRedirecting all traffic on port 80 to ssl in /etc/nginx/conf.d/nocoder.org.conf\r\nRedirecting all traffic on port 80 to ssl in /etc/nginx/conf.d/nocoder.org.conf\r\n\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\nCongratulations! You have successfully enabled https://nocoder.org and\r\nhttps://www.nocoder.org\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\nSubscribe to the EFF mailing list (email: yangjinlong86@gmail.com).\r\n\r\nIMPORTANT NOTES:\r\n - Congratulations! Your certificate and chain have been saved at:\r\n   /etc/letsencrypt/live/nocoder.org/fullchain.pem\r\n   Your key file has been saved at:\r\n   /etc/letsencrypt/live/nocoder.org/privkey.pem\r\n   Your certificate will expire on 2023-09-05. To obtain a new or\r\n   tweaked version of this certificate in the future, simply run\r\n   certbot again with the &quot;certonly&quot; option. To non-interactively\r\n   renew *all* of your certificates, run &quot;certbot renew&quot;\r\n - If you like Certbot, please consider supporting our work by:\r\n\r\n   Donating to ISRG / Let&#39;s Encrypt:   https://letsencrypt.org/donate\r\n   Donating to EFF:                    https://eff.org/donate-le\r\n   </code>\n        </deckgo-highlight-code>\n<p>证书有效期为90天，证书到期后执行<code>certbot renew</code>续期即可，Certbot会自动更新证书，不需要手动替换文件。</p>\n<blockquote>\n<p>当然，没有到期就执行续期命令，会提示没到期不需要续期，不会生成新的证书。</p>\n</blockquote>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">$ sudo certbot renew\r\nSaving debug log to /var/log/letsencrypt/letsencrypt.log\r\n\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\nProcessing /etc/letsencrypt/renewal/nocoder.org.conf\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\nCert not yet due for renewal\r\n\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\nThe following certificates are not due for renewal yet:\r\n  /etc/letsencrypt/live/nocoder.org/fullchain.pem expires on 2023-09-05 (skipped)\r\nNo renewals were attempted.\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</code>\n        </deckgo-highlight-code>\n<p>使用<code>curl -v</code>测试一下，网站访问正常。</p>\n<deckgo-highlight-code language=\"shell\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">$ curl -v  https://nocoder.org\r\n*   Trying 13.215.120.28:443...\r\n* Connected to nocoder.org (13.215.120.28) port 443 (#0)\r\n* ALPN, offering h2\r\n* ALPN, offering http/1.1\r\n* successfully set certificate verify locations:\r\n*  CAfile: /etc/ssl/certs/ca-certificates.crt\r\n*  CApath: /etc/ssl/certs\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384\r\n* ALPN, server accepted to use http/1.1\r\n* Server certificate:\r\n*  subject: CN=nocoder.org\r\n*  start date: Jun  7 01:09:21 2023 GMT\r\n*  expire date: Sep  5 01:09:20 2023 GMT\r\n*  subjectAltName: host &quot;nocoder.org&quot; matched cert&#39;s &quot;nocoder.org&quot;\r\n*  issuer: C=US; O=Let&#39;s Encrypt; CN=R3\r\n*  SSL certificate verify ok.\r\n&gt; GET / HTTP/1.1\r\n&gt; Host: nocoder.org\r\n&gt; User-Agent: curl/7.74.0\r\n&gt; Accept: */*\r\n&gt; \r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* old SSL session ID is stale, removing\r\n* Mark bundle as not supporting multiuse\r\n&lt; HTTP/1.1 200 OK\r\n&lt; Server: nginx/1.18.0\r\n&lt; Date: Wed, 07 Jun 2023 02:48:26 GMT\r\n&lt; Content-Type: text/html\r\n&lt; Content-Length: 76044\r\n&lt; Last-Modified: Wed, 07 Jun 2023 01:45:08 GMT\r\n&lt; Connection: keep-alive\r\n&lt; ETag: &quot;647fe124-1290c&quot;\r\n&lt; Accept-Ranges: bytes</code>\n        </deckgo-highlight-code>\n<p>最后，建议把letsencrypt生成的文件目录<code>/etc/letsencrypt</code>和Nginx的配置文件都整体备份一下，如果发生服务器迁移，就把整个文件打包迁移就可以继续工作。</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">/etc/letsencrypt# ls\r\naccounts  cli.ini  keys  options-ssl-nginx.conf  renewal-hooks\r\narchive   csr      live  renewal                 ssl-dhparams.pem</code>\n        </deckgo-highlight-code>","frontmatter":{"title":"申请免费HTTPS证书","date":"2023年06月07日 00:00:00","description":"通过 Let's Encrypt 提供的 Certbot 免费申请并自动安装SSL证书。"}},"previous":{"fields":{"slug":"/arts-46/"},"frontmatter":{"title":"ARTS 第46周"}},"next":{"fields":{"slug":"/remembering-haoel/"},"frontmatter":{"title":"纪念皓哥"}}},"pageContext":{"id":"6f070c82-26a4-5229-a32c-a7c4070f9ace","previousPostId":"e4f4b2e5-0f9b-5587-9172-ade408ca8e72","nextPostId":"98c578f4-9f36-54e3-8335-5f14801c32d8"}},"staticQueryHashes":["3274528899","3589320610"],"slicesMap":{}}