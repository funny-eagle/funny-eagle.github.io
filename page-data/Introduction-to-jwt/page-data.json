{"componentChunkName":"component---src-templates-blog-post-js","path":"/Introduction-to-jwt/","result":{"data":{"site":{"siteMetadata":{"title":"Funny Eagle","author":"Jason Yang"}},"markdownRemark":{"id":"e04ad2a9-fedd-5e4b-9fa9-4fa98c6d4f84","excerpt":"1. 什么是 JWT JSON Web Token，简称JWT，读作/dʒɒt/， 是一种开放标准（RFC 7519），用于以JSON对象的方式安全地传输信息，由于传输的信息是经过数字签名的，所以信…","html":"<h2 id=\"1-什么是-jwt\" style=\"position:relative;\"><a href=\"#1-%E4%BB%80%E4%B9%88%E6%98%AF-jwt\" aria-label=\"1 什么是 jwt permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 什么是 JWT</h2>\n<p><code>JSON Web Token</code>，简称<code>JWT</code>，读作<code>/dʒɒt/</code>， 是一种开放标准（<a href=\"https://tools.ietf.org/html/rfc7519\">RFC 7519</a>），用于以JSON对象的方式安全地传输信息，由于传输的信息是经过数字签名的，所以信息可被验证和信任。</p>\n<h2 id=\"2-jwt-的使用场景\" style=\"position:relative;\"><a href=\"#2-jwt-%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF\" aria-label=\"2 jwt 的使用场景 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. JWT 的使用场景</h2>\n<ul>\n<li>授权：这是使用JWT最常见的场景。用户登录后，每个后续请求都将包含JWT，从而允许用户访问该令牌允许的路由、服务和资源。单点登录是目前广泛使用JWT的功能，它的开销小并且能够轻松跨域使用。例如，服务器可以生成一个声明为“以管理员身份登录”的令牌，并将其提供给客户端，客户端可以使用该令牌来证明它以管理员身份登录。</li>\n<li>信息交换：JWT是在应用间安全传输信息的好方法。JWT可以使用密钥对进行签名，所以可以确定发送者。由于签名是使用<code>Header</code>和<code>Payload</code>计算的，因此可以验证内容是否未被篡改。</li>\n</ul>\n<h2 id=\"3-jwt-的结构\" style=\"position:relative;\"><a href=\"#3-jwt-%E7%9A%84%E7%BB%93%E6%9E%84\" aria-label=\"3 jwt 的结构 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. JWT 的结构</h2>\n<p>一个<code>JWT</code>是由<code>Header</code>、<code>Payload</code>、<code>Signature</code>三个元素构成的字符串，使用<code>.</code>分隔(Header.Payload.Signature)。前两个元素是特定结构的JSON对象，通常经过<code>base64url</code>编码。第三个是将Header和Payload的内容组合并加密。下面是一个<code>JWT</code>示例（为了方便阅读，加了换行符）：</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.\neyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.\nTJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ</code>\n        </deckgo-highlight-code>\n<p>在 <a href=\"https://jwt.io/#debugger-io\">https://jwt.io/#debugger-io</a> 进行解码后如下图所示，<strong>Header</strong> 中指定了使用<code>HS256</code>算法进行签名，令牌类型为JWT；<strong>Payload</strong>中包含了sub、name、admin信息；<strong>Signature</strong>中， 使用header和payload以及特定的<code>secret</code>来生成签名。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/47843a562d5fea9be3334c55c116a2c4/5496c/image-20231114171718443.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.86486486486487%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACT0lEQVR42qWUy27TQBSGvYuUVYTKAoklEu/AHhAreIpcVUWCKiCBxAbxBCCEuLwJ7EElLRsWiKY0KVYSOwm1x3P1zM9x3DRJFZogxvpyPOccj8/N8UqXr+HqlevY2rqEQqEAz/P+mWKxiFKplO8f7TzGwydPsfPgPra3t1GpVFCtVqfU6/WpLJfLZ7parXZ2P9s3m020Wi00Gg14WLOklBgMhvB9H5zzde7wFPcRhbtg46+Ix3sk90nuL8kobGPc/4x4lNtz2x6iUQ6bZLo2jOjBc5Yj1QERIlUkVTiHdFoMiQEM2awOz/kFU/1M52wMz1oHrS0yuWoppSlVCSE1tLFwzl2cchzH6B0fI04YUjd/wJ0y+x2FIbrdIzDGYLSGMXrBa47nUjokiJdAyIB+BDdgsILsdAkhpk1R1CSlFGVkV+KlyiH6bhAdGMQk2Q+CZNDT+OWTLs6jdCYFIgGciL+mm2XnGardkHz6wmEkHSYKCCTttQOjLOypo6aoFNXSpel0v4pphOuKPHtzlqYkXEoPpmsOdCvLu3ygMw7pBDAhRZ1ckPKmERptoDk1g0YH/5tytiYsQWcQ4nfMwGU2lzlyAU3jtNmB5BNRQ76NOTrU5c4kQRAxRGzOCY0Dp9HaOOVUCSQ0h1Ll0VhJfxRqkQROS5pDGhtGBecZ1L3EnKuLy1v0IdB4cZjg9U+OV8S7rsB74s2RwFvi5SHHx0DBE3Rgl74Gn2bQlxY9aZc6PPvEnx1I3PjEcOdLglu7Ce7tJbjb5rhJ97dJl9medxT+ADvjG4RFO6c1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20231114171718443.png\"\n        title=\"\"\n        src=\"/static/47843a562d5fea9be3334c55c116a2c4/fcda8/image-20231114171718443.png\"\n        srcset=\"/static/47843a562d5fea9be3334c55c116a2c4/12f09/image-20231114171718443.png 148w,\n/static/47843a562d5fea9be3334c55c116a2c4/e4a3f/image-20231114171718443.png 295w,\n/static/47843a562d5fea9be3334c55c116a2c4/fcda8/image-20231114171718443.png 590w,\n/static/47843a562d5fea9be3334c55c116a2c4/efc66/image-20231114171718443.png 885w,\n/static/47843a562d5fea9be3334c55c116a2c4/c83ae/image-20231114171718443.png 1180w,\n/static/47843a562d5fea9be3334c55c116a2c4/5496c/image-20231114171718443.png 2452w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<p><strong>Header</strong>：通常由令牌的类型和签名算法两部分组成，经过对该<code>JSON</code>进行Base64Url编码后形成第一个元素。</p>\n</li>\n<li>\n<p><strong>Payload</strong>：包含传输的数据。官方称作声明( claims)，用来描述实体（通常是用户）和附加数据，声明分为三类：</p>\n<ul>\n<li>注册声明(registered claims)：预定义的声明，非强制性，都只有三个字符，旨在紧凑。包含：\n<ul>\n<li><code>iss</code> ：Issuer</li>\n<li><code>exp</code>：Expiration Time</li>\n<li><code>sub</code> ：Subject</li>\n<li><code>aud</code>：Audience</li>\n<li><code>nbf</code>：Not Before</li>\n<li><code>iat</code>：Issued At</li>\n<li><code>jti</code>：JWT ID</li>\n</ul>\n</li>\n<li>公共声明(public claims)：遵循 <a href=\"https://www.iana.org/assignments/jwt/jwt.xhtml\">IANA JSON Web Token Registry</a> 中定义的声明命名，或者防冲突的命名</li>\n<li>私有声明(private claims)：用户自定义声明。</li>\n</ul>\n</li>\n<li>\n<p><strong>Signature</strong> 用于验证JWT的真实性和完整性，签名的生成方式通常是将Header和Payload组合起来，使用一个secret key 进行计算，然后再与令牌中的签名部分比对</p>\n</li>\n</ul>\n<h2 id=\"4-jwt-工作流程\" style=\"position:relative;\"><a href=\"#4-jwt-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B\" aria-label=\"4 jwt 工作流程 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. JWT 工作流程</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8d31250fc93192cfa985f60183285af4/8cdda/1269fc4dd4a144b5a001f35b4a7804d9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9ElEQVR42nVS6W7aQBDm/R+gUkObvEj/tFKqqKQUAyWEADEQA8YH9t7rtaGfvY05AqPxaDzHzjdHY7/fZ3lOdSYqqYzZf6DM5AwBRYEAbfLa3sDXC6Kbdvfm52Pzt/Ow8mHZvbuLXan+2QTNdvfT94dm22mtN3VAmdwPoy+d3l3Lue30fx356mQniG6d/uf71td27zwZsLkxROtESMqlVEpKrXRmJZgwkcKVGcBG8AlsSyozq008mr45T9PhZPHielBGrjcYz/+OZtP5mnB1NotGjYEIFRGRcpVwCd6y/5wwCWOQsnmQhIQLXU40L4qTyhij7fAaSW2IVMNX79uPx/tWn3F5DPuQnBA2fvWms2UQJSW0yo7ib2GSMDFxvaUfFsWuUfs2CfNCElMJ8H5M3WWw8ON1TPALDlMRU3EGrXGMCsiBvdgdQqDhD0aw0Jl11O4LPWNXjAkhrJSUCfsa1nGhsjVQqTFYKtXLbNV9dgeTRW80G4wXzrO7pWLLBHq+uiquNJNaqAwFUMEyagEQOoLL31LkY2BCKvDVVRmTcyHBdp/Wivwg5Ziit9r4wRaxh8q4BNwJnpA68/yoO3Q7T9OYsKyyQK5juoyI1OYUdlUwIhzbKi+sOimMgCqd8vLCkurUoL+vYGdTDrCPN3SR0EJxOrB/hRLSG+CDBsYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1269fc4dd4a144b5a001f35b4a7804d9.png\"\n        title=\"\"\n        src=\"/static/8d31250fc93192cfa985f60183285af4/fcda8/1269fc4dd4a144b5a001f35b4a7804d9.png\"\n        srcset=\"/static/8d31250fc93192cfa985f60183285af4/12f09/1269fc4dd4a144b5a001f35b4a7804d9.png 148w,\n/static/8d31250fc93192cfa985f60183285af4/e4a3f/1269fc4dd4a144b5a001f35b4a7804d9.png 295w,\n/static/8d31250fc93192cfa985f60183285af4/fcda8/1269fc4dd4a144b5a001f35b4a7804d9.png 590w,\n/static/8d31250fc93192cfa985f60183285af4/efc66/1269fc4dd4a144b5a001f35b4a7804d9.png 885w,\n/static/8d31250fc93192cfa985f60183285af4/8cdda/1269fc4dd4a144b5a001f35b4a7804d9.png 1168w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>首先客户端发送带有用户名和密码的Post请求。服务端验证身份成功后，生成JWT返回给客户端。后续所有的请求中，客户端都会在Header中带上这个toekn（JWT），服务端通过token验证用户身份，返回对应的响应数据。</p>\n<h2 id=\"参考文献\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\" aria-label=\"参考文献 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考文献</h2>\n<ul>\n<li><a href=\"https://jwt.io/introduction/\">JWT.IO</a></li>\n<li><a href=\"https://auth0.com/resources/ebooks/jwt-handbook?_ga=2.186766504.1633974048.1699948492-2054291612.1699940448&#x26;_gl=1*1c5u08o*rollup_ga*MjA1NDI5MTYxMi4xNjk5OTQwNDQ4*rollup_ga_F1G3E656YZ*MTY5OTk1MzQ2OS4yLjEuMTY5OTk1NDg3Mi42MC4wLjA.*_ga*MjA1NDI5MTYxMi4xNjk5OTQwNDQ4*_ga_QKMSDV5369*MTY5OTk1MzQ2OS4yLjEuMTY5OTk1NDg3My42MC4wLjA.\">JWT Handbook</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/JSON_Web_Token\">wikipedia JSON Web Token</a></li>\n<li><a href=\"https://www.iana.org/assignments/jwt/jwt.xhtml\">JSON Web Token Claims</a></li>\n</ul>","tableOfContents":"<ul>\n<li><a href=\"#1-%E4%BB%80%E4%B9%88%E6%98%AF-jwt\">1. 什么是 JWT</a></li>\n<li><a href=\"#2-jwt-%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF\">2. JWT 的使用场景</a></li>\n<li><a href=\"#3-jwt-%E7%9A%84%E7%BB%93%E6%9E%84\">3. JWT 的结构</a></li>\n<li><a href=\"#4-jwt-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B\">4. JWT 工作流程</a></li>\n<li><a href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\">参考文献</a></li>\n</ul>","frontmatter":{"title":"【JWT】JSON Web Token 入门简介","tags":["coding"],"description":"JSON Web Token 入门简介","date":"2023-11-14"}}},"pageContext":{"slug":"/Introduction-to-jwt/","previous":{"fields":{"slug":"/tribes-we-were-children-chords/"},"frontmatter":{"title":"We Were Children - Tribes 和弦谱","tags":["music","chords"],"slug":""}},"next":{"fields":{"slug":"/jwt-example/"},"frontmatter":{"title":"【JWT】基于SpringBoot的JSON Web Token使用示例","tags":["coding"],"slug":""}}}},"staticQueryHashes":["2052298874"],"slicesMap":{}}