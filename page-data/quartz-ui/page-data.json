{"componentChunkName":"component---src-templates-blog-post-js","path":"/quartz-ui/","result":{"data":{"site":{"siteMetadata":{"title":"Jason Yang's Website","author":"Jason Yang"}},"markdownRemark":{"id":"624be8ef-a5cf-557f-99c4-25aa88f34965","excerpt":"需求 我需要实现一个基于springboot 的quartz-ui组件，可以通过web界面来管理定时任务。然后打包成jar文件，提供给使用quartz的项目。 基本思路 去github上逛一圈，有现…","html":"<h2 id=\"需求\" style=\"position:relative;\"><a href=\"#%E9%9C%80%E6%B1%82\" aria-label=\"需求 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>需求</h2>\n<blockquote>\n<p>我需要实现一个基于<code>springboot</code> 的<code>quartz-ui</code>组件，可以通过web界面来管理定时任务。然后打包成<code>jar</code>文件，提供给使用<code>quartz</code>的项目。</p>\n</blockquote>\n<h2 id=\"基本思路\" style=\"position:relative;\"><a href=\"#%E5%9F%BA%E6%9C%AC%E6%80%9D%E8%B7%AF\" aria-label=\"基本思路 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>基本思路</h2>\n<ol>\n<li>去github上逛一圈，有现成的就拿来试试，改改直接用，不然还能怎么样，难道自己生写</li>\n<li>好吧，如果没有我就去啃 <code>quartz</code> 的 API，然后自己生写</li>\n</ol>\n<p>于是很快我就找到了 <a href=\"https://github.com/zjcscut/quartz-web-ui-kit\">quartz-web-ui-kit</a>，<code>Readme</code>在这个哥们儿的个人博客上，但链接已经访问不到了，不过找到一个cnblogs的<a href=\"https://www.cnblogs.com/throwable/p/12670693.html\">基于Quartz编写一个可复用的分布式调度任务管理WebUI组件</a>。代码拉下来研究了一下，结构清晰，命名舒服，maven的依赖也没什么多余的，直击要害，就只解决任务管理问题。模版用<code>freemarker</code>，<code>css</code>和<code>js</code>用<code>uikit</code>和<code>jquery</code>。简单明了，感谢分享，就用您这个了。</p>\n<p>跑完SQL脚本，很顺利就运行起来了，测试了一下功能，除了禁用的任务还能点触发，后台会报错，倒也没啥影响。</p>\n<p>接下来开始动手改：\r\n1、这个组件需要打成<code>jar</code>，需要的项目就增加一个依赖。\r\n2、上传到nexus私服。</p>\n<h2 id=\"问题和解决办法\" style=\"position:relative;\"><a href=\"#%E9%97%AE%E9%A2%98%E5%92%8C%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95\" aria-label=\"问题和解决办法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>问题和解决办法</h2>\n<p>1、项目无法直接加载<code>jar</code>中静态文件，打包时需要将静态文件放在<code>META-INF/resources</code>目录下。</p>\n<p>在<code>pom.xml</code> 的 <code>build</code> 下增加</p>\n<deckgo-highlight-code language=\"xml\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">&lt;resources&gt;\r\n\t&lt;resource&gt;\r\n\t\t&lt;directory&gt;${basedir}/src/main/resources/templates&lt;/directory&gt;\r\n\t\t&lt;targetPath&gt;META-INF/resources/&lt;/targetPath&gt;\r\n\t\t&lt;includes&gt;\r\n\t\t\t&lt;include&gt;**/**&lt;/include&gt;\r\n\t\t&lt;/includes&gt;\r\n\t&lt;/resource&gt;\r\n&lt;/resources&gt;</code>\n        </deckgo-highlight-code>\n<p><code>application.yml</code>中也要对应修改<code>template-loader-path</code>的路径</p>\n<deckgo-highlight-code language=\"yml\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">spring:\r\n  freemarker:\r\n    cache: false\r\n    charset: UTF-8\r\n    check-template-location: true\r\n    content-type: text/html\r\n    expose-request-attributes: true\r\n    expose-session-attributes: true\r\n    request-context-attribute: request\r\n    suffix: .ftl\r\n    template-loader-path: classpath:/META-INF/resources/\r\n    prefer-file-system-access: false</code>\n        </deckgo-highlight-code>\n<p>2、配置文件也需要打包进去，继续在<code>pom.xml</code> 的 <code>resources</code> 下增加</p>\n<deckgo-highlight-code language=\"xml\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">\t&lt;resource&gt;\r\n\t\t&lt;directory&gt;${basedir}/src/main/resources/&lt;/directory&gt;\r\n\t\t&lt;includes&gt;\r\n\t\t\t&lt;include&gt;**/*.yml&lt;/include&gt;\r\n\t\t\t&lt;include&gt;**/*.factories&lt;/include&gt;\r\n\t\t&lt;/includes&gt;\r\n\t&lt;/resource&gt;</code>\n        </deckgo-highlight-code>\n<p>3、发现<code>jar</code>中的配置文件不生效，被项目的<code>application.yml</code>覆盖了</p>\n<p>将配置文件放在<code>src/main/resources/config</code>目录下即可，参考<code>Spring</code><a href=\"https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/boot-features-external-config.html\">官方文档</a></p>\n<blockquote>\n<h3 id=\"243-application-property-files\" style=\"position:relative;\"><a href=\"#243-application-property-files\" aria-label=\"243 application property files permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>24.3 Application Property Files</h3>\n<p><code>SpringApplication</code> loads properties from <code>application.properties</code> files in the following locations and adds them to the Spring <code>Environment</code>:</p>\n<p>A <code>/config</code> subdirectory of the current directory\r\nThe current directory\r\nA classpath <code>/config</code> package\r\nThe classpath root</p>\n</blockquote>\n<h2 id=\"参考链接\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\" aria-label=\"参考链接 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考链接</h2>\n<ul>\n<li><a href=\"https://www.cnblogs.com/throwable/p/12670693.html\">https://www.cnblogs.com/throwable/p/12670693.html</a></li>\n<li><a href=\"https://github.com/zjcscut/quartz-web-ui-kit\">https://github.com/zjcscut/quartz-web-ui-kit</a></li>\n<li><a href=\"https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/boot-features-external-config.html\">https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/boot-features-external-config.html</a></li>\n</ul>\n<p>差不多了，有啥后面再补充。今天周五，下午划水写博客，下班回家玩羊娃子喜欢的周五夜放克。</p>","tableOfContents":"<ul>\n<li><a href=\"#%E9%9C%80%E6%B1%82\">需求</a></li>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E6%80%9D%E8%B7%AF\">基本思路</a></li>\n<li><a href=\"#%E9%97%AE%E9%A2%98%E5%92%8C%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95\">问题和解决办法</a></li>\n<li><a href=\"#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\">参考链接</a></li>\n</ul>","frontmatter":{"title":"基于Quartz的定时任务UI组件","tags":["coding"],"description":"基于Quartz的定时任务UI组件","date":"2023-07-07"}}},"pageContext":{"slug":"/quartz-ui/","previous":{"fields":{"slug":"/wind-term-hanging-problem/"},"frontmatter":{"title":"WindTerm 2.5.0 输入用户名后假死卡住的解决办法","tags":["coding"],"slug":""}},"next":null}},"staticQueryHashes":["2052298874"],"slicesMap":{}}