{"componentChunkName":"component---src-templates-blog-post-js","path":"/goaccess-show-cn-and-location/","result":{"data":{"site":{"siteMetadata":{"title":"Funny Eagle","author":"Jason Yang"}},"markdownRemark":{"id":"b9471456-d9f6-5c34-bee2-e9b1a6f12bb6","excerpt":"本文主要介绍如何将goaccess设置为中文报告并显示访客地理位置。 本文内容基于 Ubuntu 22.04.5 LTS ，goaccess 1.9.4 GoAccess 是轻量级日志分析工具，支持…","html":"<blockquote>\n<p>本文主要介绍如何将goaccess设置为中文报告并显示访客地理位置。</p>\n<p>本文内容基于 Ubuntu 22.04.5 LTS ，goaccess 1.9.4</p>\n</blockquote>\n<p>GoAccess 是轻量级日志分析工具，支持实时解析 Nginx、Apache 等日志，生成交互式 HTML 报告，含访问统计、用户来源等可视化数据。</p>\n<h2 id=\"使goaccess生成的报告页面显示为中文\" style=\"position:relative;\"><a href=\"#%E4%BD%BFgoaccess%E7%94%9F%E6%88%90%E7%9A%84%E6%8A%A5%E5%91%8A%E9%A1%B5%E9%9D%A2%E6%98%BE%E7%A4%BA%E4%B8%BA%E4%B8%AD%E6%96%87\" aria-label=\"使goaccess生成的报告页面显示为中文 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使goaccess生成的报告页面显示为中文</h2>\n<p>goaccess 1.3.x 版本开始支持中文，打开终端，输入<code class=\"language-text\">locale</code>查看当前系统语言设置.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># locale</span>\r\n<span class=\"token assign-left variable\"><span class=\"token environment constant\">LANG</span></span><span class=\"token operator\">=</span>zh_CN.UTF-8</code></pre></div>\n<p>如果当前系统语言不是中文，使用命令来安装中文语言包。</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> language-pack-zh-hans</code></pre></div>\n<p>安装完成后，将系统语言修改为中文</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> update-locale <span class=\"token assign-left variable\"><span class=\"token environment constant\">LANG</span></span><span class=\"token operator\">=</span>zh_CN.UTF-8</code></pre></div>\n<p>修改完重启系统以生效。</p>\n<h2 id=\"使goaccess生成的报告显示地理位置\" style=\"position:relative;\"><a href=\"#%E4%BD%BFgoaccess%E7%94%9F%E6%88%90%E7%9A%84%E6%8A%A5%E5%91%8A%E6%98%BE%E7%A4%BA%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE\" aria-label=\"使goaccess生成的报告显示地理位置 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使goaccess生成的报告显示地理位置</h2>\n<p>显示地理位置需要启用geoip，所以goaccess需要手动编译安装</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> libmaxminddb0 libmaxminddb-dev mmdb-bin  libncursesw5-dev\r\n$ <span class=\"token function\">git</span> clone https://github.com/allinurl/goaccess.git \r\n$ <span class=\"token builtin class-name\">cd</span> goaccess\r\n$ autoreconf <span class=\"token parameter variable\">-fi</span>\r\n$ ./configure --enable-utf8 --enable-geoip<span class=\"token operator\">=</span>mmdb\r\n$ <span class=\"token function\">make</span>\r\n$ <span class=\"token function\">make</span> <span class=\"token function\">install</span></code></pre></div>\n<p>安装完成后，输入goaccess —version 查看一下版本，Build configure arguments: 需要有—enable-geoip=mmdb</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ goaccess <span class=\"token parameter variable\">--version</span>\r\nGoAccess - <span class=\"token number\">1.9</span>.4.\r\nFor <span class=\"token function\">more</span> details visit: https://goaccess.io/\r\nCopyright <span class=\"token punctuation\">(</span>C<span class=\"token punctuation\">)</span> <span class=\"token number\">2009</span>-2024 by Gerardo Orellana\r\n\r\nBuild configure arguments:\r\n  --enable-utf8\r\n  --enable-geoip<span class=\"token operator\">=</span>mmdb</code></pre></div>\n<p>到 maxmind.com下载 GeoLite2-City 的mmdb数据库文件，下载完解压，我下载下来是个<code class=\"language-text\">GeoLite2-City_20250620.tar.gz</code>，解压后在goaccess命令后面跟上GeoLite2-City.mmdb路径 <code class=\"language-text\">--geoip-database=/xxx/GeoLite2-City_20250620/GeoLite2-City.mmdb</code></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/be8f8e39c972c257eca0e12328b47e2d/29114/9f7e640d00714646aac04601d03f2de0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.54054054054055%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlklEQVR42nWS2W7jMAxF/f8fVmBeA3TStGnHqa3Eq2wtlEgt9tBjzEPT9IAgbEKXm1Qsy7ozA1WiP382GoPBII2TBia7ee1xcjRakhYMkksLxJyWpQAfFCCG6CmAp4vUr508teO7VLX1lXaV2c2zcaS2KHyqfIKUC+1o4MwhUUwhplYq0c9i1NbT+o0UI/scYyJcuLJ2wbI05Zz5d61E/VkLhwTOwYb7Z+yctXA8vUkpL7f2cL44j4XhYQwCBu6cK/PBeZ7VD7y+l03TVv18vE6IVBi/tc3bYv0u1lobYx6KT+cP0fZgtFYzIhbah8Ggo8i9h5RZ2XXdMAzOOfyK974SV620AtfOEGMshKJDC2dJH3MYXVyXZRt/X8BXONKPW7ejC1cTOFJMgI3yXJ8NY1p/hrOJpjUO47JiXvOyFp6i9dvCeeaYskfkhsMjiKhvO1CaJgW3Nloo7tLzTfDMvDB9B69wml+efnXPv8uyPhxL1PpezGUfKP/z9qesm05qc5sUv8gH4v2qvsPxS1WPcgJr+ZuI/gLaEOjQNVEmpgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"maxmind-geolite2-city\"\n        title=\"\"\n        src=\"/static/be8f8e39c972c257eca0e12328b47e2d/fcda8/9f7e640d00714646aac04601d03f2de0.png\"\n        srcset=\"/static/be8f8e39c972c257eca0e12328b47e2d/12f09/9f7e640d00714646aac04601d03f2de0.png 148w,\n/static/be8f8e39c972c257eca0e12328b47e2d/e4a3f/9f7e640d00714646aac04601d03f2de0.png 295w,\n/static/be8f8e39c972c257eca0e12328b47e2d/fcda8/9f7e640d00714646aac04601d03f2de0.png 590w,\n/static/be8f8e39c972c257eca0e12328b47e2d/efc66/9f7e640d00714646aac04601d03f2de0.png 885w,\n/static/be8f8e39c972c257eca0e12328b47e2d/c83ae/9f7e640d00714646aac04601d03f2de0.png 1180w,\n/static/be8f8e39c972c257eca0e12328b47e2d/29114/9f7e640d00714646aac04601d03f2de0.png 1920w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>完整使用命令如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">goaccess /var/log/nginx/access.log <span class=\"token parameter variable\">-o</span> /var/www/html/report.html --log-format<span class=\"token operator\">=</span>COMBINED --geoip-database<span class=\"token operator\">=</span>/root/GeoLite2-City_20250620/GeoLite2-City.mmdb --ignore-crawlers</code></pre></div>\n<p><code class=\"language-text\">--ignore-crawlers</code> 是忽略爬虫，可以不加。</p>\n<p>使用效果\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1459d797da276a4b0e5f9810d913d100/29114/5870d230fc1b4c15a2d84b745d4c9f41.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.21621621621622%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABcUlEQVR42iWQSXLbQAxFeQ27LFlkzwN6opqkKFmiKIqS46mycpKdF9nk/gcIbFdh8QvAw/+F4jgMh9N4mq/T5XE8Xx6G03ftDuN+GPfjNF9ep/PL9ennr/nHPB0Pw9Bud/Hxd/P8p4CYles6k60AUKGWLkoflY/SgXJLGy/nj/f57/v541//9pSvOg3B9ZKwbrNFuCEcLKy1TVzH5LM2kXJrbBI6lNwQAdoEYROD3Kx3VAYq3LJSIfdFyUzKva8743OoO0gtV55JJ/GW8sKEZrNHA5/adntAQQXgtOI2d7tiRTUqrn3FtLRB2Sgs3obNwyhtJBJXgSlHlVOQlA24fLfiNwvqUvMJr6jiypVMMWlRQMgY5DhdlUtE2oprKi0RhmuHHvdE3C7JzaKqBHw7G+0SFVa7GsI65g1qhI1fky9bTISkiw0WOt2tGPI4LfAl3GDaWhgMHCG2VDp8koJaQv0Feyxsakg2fMIl04tSpKb/D3U4WeWkxp45AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"c14d048bfbb4b512de0a27abfaa14732.png\"\n        title=\"\"\n        src=\"/static/1459d797da276a4b0e5f9810d913d100/fcda8/5870d230fc1b4c15a2d84b745d4c9f41.png\"\n        srcset=\"/static/1459d797da276a4b0e5f9810d913d100/12f09/5870d230fc1b4c15a2d84b745d4c9f41.png 148w,\n/static/1459d797da276a4b0e5f9810d913d100/e4a3f/5870d230fc1b4c15a2d84b745d4c9f41.png 295w,\n/static/1459d797da276a4b0e5f9810d913d100/fcda8/5870d230fc1b4c15a2d84b745d4c9f41.png 590w,\n/static/1459d797da276a4b0e5f9810d913d100/efc66/5870d230fc1b4c15a2d84b745d4c9f41.png 885w,\n/static/1459d797da276a4b0e5f9810d913d100/c83ae/5870d230fc1b4c15a2d84b745d4c9f41.png 1180w,\n/static/1459d797da276a4b0e5f9810d913d100/29114/5870d230fc1b4c15a2d84b745d4c9f41.png 1920w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>","tableOfContents":"<ul>\n<li><a href=\"#%E4%BD%BFgoaccess%E7%94%9F%E6%88%90%E7%9A%84%E6%8A%A5%E5%91%8A%E9%A1%B5%E9%9D%A2%E6%98%BE%E7%A4%BA%E4%B8%BA%E4%B8%AD%E6%96%87\">使goaccess生成的报告页面显示为中文</a></li>\n<li><a href=\"#%E4%BD%BFgoaccess%E7%94%9F%E6%88%90%E7%9A%84%E6%8A%A5%E5%91%8A%E6%98%BE%E7%A4%BA%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE\">使goaccess生成的报告显示地理位置</a></li>\n</ul>","frontmatter":{"title":"goaccess设置为中文报告并显示访客地理位置","tags":["coding"],"description":"GoAccess 是轻量级日志分析工具，支持实时解析 Nginx、Apache 等日志，生成交互式 HTML 报告，含访问统计、用户来源等可视化数据。本文主要介绍如何将goaccess设置为中文报告并显示访客地理位置。","date":"2025-06-23"}}},"pageContext":{"slug":"/goaccess-show-cn-and-location","previous":{"fields":{"slug":"/nacos-cient-develop-problems"},"frontmatter":{"title":"Nacos Client 获取不到 Nacos 服务端配置的常见原因与解决方案","tags":["coding"],"slug":"/nacos-cient-develop-problems"}},"next":{"fields":{"slug":"/what-is-jaas"},"frontmatter":{"title":"JAAS是什么","tags":["coding"],"slug":"/what-is-jaas"}}}},"staticQueryHashes":["2052298874"],"slicesMap":{}}