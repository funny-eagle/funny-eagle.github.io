{"componentChunkName":"component---src-templates-blog-post-js","path":"/aspect-oriented-programming/","result":{"data":{"site":{"siteMetadata":{"title":"Funny Eagle","author":"Jason Yang"}},"markdownRemark":{"id":"40de5a2a-47f8-53c9-8965-4a5d40954c86","excerpt":"AOP 被认为是对 OOP 的一个强大的补充，有了 AOP，我们可以把之前分散在应用各处的行为放在可重用的模块中，可以有效减少冗余代码，并让我们的类只关注自身的主要功能。 AOP 概述 面向切面编程…","html":"<blockquote>\n<p>AOP 被认为是对 OOP 的一个强大的补充，有了 AOP，我们可以把之前分散在应用各处的行为放在可重用的模块中，可以有效减少冗余代码，并让我们的类只关注自身的主要功能。</p>\n</blockquote>\n<h2 id=\"aop-概述\" style=\"position:relative;\"><a href=\"#aop-%E6%A6%82%E8%BF%B0\" aria-label=\"aop 概述 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AOP 概述</h2>\n<p>面向切面编程（aspect-oriented programming），是一种将横切关注点与业务逻辑分离的编程方式。每个横切关注点都集中在一个地方，而不是分散在多处代码中。这样使我们的服务模块更加简洁，因为它们只包含了主要关注点的代码，而次要的功能或者说辅助的功能被转移到切面中了。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5b6b3cd32e4a45bdce71d2e537773d2d/82158/aop-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABYlAAAWJQFJUiTwAAACRUlEQVR42mWSW1MSAQCF91f0lPnUT+itTM2aSqWcZijsoSlnqpdmmAyVgkZNu1iRtipggNhq3lBR0Vw2mXC0AQS5iJu43BbcFoGAhR0IWCDrlTPn6Zvzdj6gVBamkA8l8HyBKTE0k9r/R9JULuItXwKR5B8znrIGaWuA3gmk7MHMhssjXL6NuILu/bWk/rSRKKG6GUJ01UQwFl/M4k8c1+SNE7EMoLEcnuEtnOerz/EXq4WaCz2b14a27k/cuAQaO+RjPk1FFRjo7Bs2CWtqB70s0NEAOlmDztr3dmjrF7AXpESr2CCMgbAbhLFhJDigtT/8dL1Pi6pglWWicmCDmlSOrrfXfNz4Lf7mH14PiHWBfthvdMcAnZNk9X5tFn1nv0U4H/Sc/h93RvQtsqZmxXYvBNmmK9jKw9ciia69ulmJ31M47yrQllH0lmR3zkwCRiz6SG7gfd5uHTPxIDMPsnfMGLgqNldlky9NktpTXHVYKZP97KlrVZOC+YNn827BgvvJ9AHijABmb4w3bhVM2Z9OWgUzDuGs6/niDneW3bbgGFuZDmkr25ajkEKB9lzka0Jdaqxz0dO15OGrsHU0AiC74bpupL57pf7FWn0v3PBSz5ZuPvjS1Cg2dCqV+OrJKxL81buhHWFVo9THke7dlKKcEZQF7k4ZSCCdZcLJXJRmIjQTTmXj6ZINRx/PXTb4XQnPOK07QVApApGRb84S0WSYyh7F00eJTCiepjN5oPz6YrFIJnyFYvG/JK5jUshQuSheLslfJzS6Fl9fnQ0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"aop-demo\"\n        title=\"\"\n        src=\"/static/5b6b3cd32e4a45bdce71d2e537773d2d/fcda8/aop-1.png\"\n        srcset=\"/static/5b6b3cd32e4a45bdce71d2e537773d2d/12f09/aop-1.png 148w,\n/static/5b6b3cd32e4a45bdce71d2e537773d2d/e4a3f/aop-1.png 295w,\n/static/5b6b3cd32e4a45bdce71d2e537773d2d/fcda8/aop-1.png 590w,\n/static/5b6b3cd32e4a45bdce71d2e537773d2d/82158/aop-1.png 696w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>上图表示划分为三个服务模块的应用，每个模块提供相应的服务，而且这些模块都需要类似的辅助功能，例如日志、安全、事务等等。我们并不想在各个模块中写重复的日志、安全、事务的代码，那么就可以使用选用切面这个方案，来解决这个问题。</p>\n<h2 id=\"aop-术语\" style=\"position:relative;\"><a href=\"#aop-%E6%9C%AF%E8%AF%AD\" aria-label=\"aop 术语 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AOP 术语</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 552px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a812f60268ee472118ca1a75f2478f87/08c0b/aop-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.64864864864865%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZ0lEQVR42qVR20vCUBj3D++ppyAQegkK36LCwCZLV2bezua6oUddeCNLm0NdbDtjsLnLOXa2iYQFPfTxcc7h9/1+3+0kVv+wxE+oP2+AIVuRsqDH8oO88JpT0IjihJC/xU25dNU+Psonk5n9M3DIdVNvnxLFfd8LggBHthbTdFuOcVgBds1UeqwslvQdI1NFkeXpZPKBkBlpyaZy3FIop2TPJ5l8d2ePE56mUQjHPTuO7bpuzAsrLz1M3faI45HNabuEKSq7B49CU/fwynYjgk80w7Rsb6w6azEjzi8EowSyLN+7BYUc3yjWGFYYlAFzwvVqYq4AqteAvwEVDojnNe2yPj8tz6R3KxRX2noRmvetRhXKdSiB1uhZ6oDOrPYg8C8zETYF2ONhX4BdHg5LbesOammwmKjLX7ZNZ9N0U9c0VdWQoeMg2CLQ6TXL39p2tBJ6YUyVhoFMZCCEgsAP80XRyFbfP/sLEK8ovuLIe2MAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"aop-demo\"\n        title=\"\"\n        src=\"/static/a812f60268ee472118ca1a75f2478f87/08c0b/aop-2.png\"\n        srcset=\"/static/a812f60268ee472118ca1a75f2478f87/12f09/aop-2.png 148w,\n/static/a812f60268ee472118ca1a75f2478f87/e4a3f/aop-2.png 295w,\n/static/a812f60268ee472118ca1a75f2478f87/08c0b/aop-2.png 552w\"\n        sizes=\"(max-width: 552px) 100vw, 552px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<p><code class=\"language-text\">advice</code> - 通知</p>\n<ul>\n<li>\n<blockquote>\n<p>切面的具体行为，即要切入执行的代码</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">pointcut</code> - 切点</p>\n<ul>\n<li>\n<blockquote>\n<p>通知被应用的具体位置</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">join point</code> - 连接点</p>\n<ul>\n<li>\n<blockquote>\n<p>程序运行时，能够应用通知的所有点</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">aspect</code> - 切面</p>\n<ul>\n<li>\n<blockquote>\n<p>什么时候在什么地方做什么事情，是切点和通知的结合</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">target</code> - 目标对象</p>\n<ul>\n<li>\n<blockquote>\n<p>被切入功能的目标对象</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">introduction</code> - 引入</p>\n<ul>\n<li>\n<blockquote>\n<p>将新的方法或属性引入到现有的类中</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">weaving</code> - 织入</p>\n<ul>\n<li>\n<blockquote>\n<p>把切面应用到目标对象并创建新的代理对象的过程</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"代理模式\" style=\"position:relative;\"><a href=\"#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F\" aria-label=\"代理模式 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>代理模式</h2>\n<p>代理模式是使用代理对象完成用户请求，屏蔽用户对真实对象访问的一种设计模式。现实生活中，代理人被授权执行当事人的一些事宜，无需当事人出面，从第三方的角度看，他只和代理人通信。而事实上代理人是要有当事人的授权，并且在核心问题上还需要请示当事人。</p>\n<p>AOP 就是使用代理模式实现的，其中的代理类就相当于AOP中的切面。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 533px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e5b64f7ca74b1ce8f0312fb2d991c27d/a1aa0/aop-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNklEQVR42mP4TwD8A+K/f//++PXtx68f//6BhSDU//8MCCXomkBiHz6/3nBmYvfO4IbtNk3b7accTDh8e9XvPz8hShj+/fn6++vtf9/v/Pl669/vz0Adv3///vnz5/dvP168fdK8ITBxtnzSFOfECUkp05Kyl9hkrlBcfKIGavPvF4u/7GG4u47t/TaGL/f7P3///+3rp6/fvgDlDt9anbdWKXd2sV/2edf4He6J+4IKjxUuCSxep/v47S2w5g/Hvl8J+ngx5utF319vd/8FOefP338g+ubzU7mr1LMWeMY0zg0r3xZWsTmhoy9rqXHdZsdP394h/IwrqA7dXFG72TpvtVL2Cs3sFeoFa1Tad/jdfHESHGx/GcCK/sLQPyxh9u3N+Yd79t1YeODm0mvPjn//9RVuNABF2lqR6DV0LQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"aop-demo\"\n        title=\"\"\n        src=\"/static/e5b64f7ca74b1ce8f0312fb2d991c27d/a1aa0/aop-3.png\"\n        srcset=\"/static/e5b64f7ca74b1ce8f0312fb2d991c27d/12f09/aop-3.png 148w,\n/static/e5b64f7ca74b1ce8f0312fb2d991c27d/e4a3f/aop-3.png 295w,\n/static/e5b64f7ca74b1ce8f0312fb2d991c27d/a1aa0/aop-3.png 533w\"\n        sizes=\"(max-width: 533px) 100vw, 533px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"静态代理\" style=\"position:relative;\"><a href=\"#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86\" aria-label=\"静态代理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>静态代理</h3>\n<p>之所以称为静态代理，是因为在程序运行前，代理类就已经存在了。</p>\n<p><strong>举个例子</strong></p>\n<p>一般艺人都需要助理，来帮他跑腿，演出前谈价格，演出后收钱，只有表演的时候艺人才亲自出马。</p>\n<ol>\n<li>\n<p>定义一个艺人接口</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>staticproxy</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">/**\r\n * 艺人接口\r\n * @author jason\r\n * @date 2019/2/14.\r\n */</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Artist</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">/**\r\n     * 表演\r\n     */</span>\r\n    <span class=\"token keyword\">void</span> <span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>定义艺人实现类刘德华</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>staticproxy</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">/**\r\n * 艺人刘德华\r\n *\r\n * @author jason\r\n * @date 2019/2/14.\r\n */</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LiuDehua</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Artist</span> <span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">LiuDehua</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">LiuDehua</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LiuDehua</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"刘德华出场演唱笨小孩...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>编写代理类</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>staticproxy</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">/**\r\n * 艺人助理（代理类）\r\n *\r\n * @author jason\r\n * @date 2019/2/14.\r\n */</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ArtistProxy</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Artist</span> <span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">LiuDehua</span> liuDehua<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">ArtistProxy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ArtistProxy</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LiuDehua</span> liuDehua<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>liuDehua <span class=\"token operator\">=</span> liuDehua<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"助理出面谈价格，签合同...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        liuDehua<span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"助理出面收钱...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>运行<code class=\"language-text\">main</code>方法，将艺人实例传入代理类的构造方法，然后调用代理类的<code class=\"language-text\">perform()</code></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>staticproxy</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">/**\r\n * @author jason\r\n * @date 2019/2/14.\r\n */</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">StaticProxyDemo</span> <span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">LiuDehua</span> liuDehua <span class=\"token operator\">=</span> <span class=\"token class-name\">LiuDehua</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">ArtistProxy</span> proxy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArtistProxy</span><span class=\"token punctuation\">(</span>liuDehua<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        proxy<span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>运行结果</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">助理出面谈价格，签合同<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\r\n刘德华出场演唱笨小孩<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\r\n助理出面收钱<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\r\n\r\n<span class=\"token class-name\">Process</span> finished <span class=\"token keyword\">with</span> <span class=\"token namespace\">exit</span> code <span class=\"token number\">0</span></code></pre></div>\n</li>\n</ol>\n<p><strong>静态代理的缺点</strong></p>\n<p>假设主题接口中的方法很多，为每一个接口写一个代理方法也很麻烦。如果接口有变动，则真实主题和代理类都要修改，不利于系统维护；</p>\n<h3 id=\"动态代理\" style=\"position:relative;\"><a href=\"#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86\" aria-label=\"动态代理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>动态代理</h3>\n<p>动态代理是在程序运行时，利用Java反射机制动态的生成代理类的代理模式。</p>\n<h4 id=\"jdk动态代理\" style=\"position:relative;\"><a href=\"#jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86\" aria-label=\"jdk动态代理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jdk动态代理</h4>\n<ul>\n<li>JDK的动态代理依靠接口实现</li>\n<li>如果类并没有实现接口，则不能使用Jdk的动态代理</li>\n</ul>\n<ol>\n<li>\n<p>定义图书服务接口</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>jdkproxy</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">/**\r\n * 图书服务接口\r\n * @author jason\r\n * @date 2019/2/14.\r\n */</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">BookService</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">/**\r\n     * 新增图书接口\r\n     */</span>\r\n    <span class=\"token keyword\">void</span> <span class=\"token function\">addBook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>编写图书服务实现类</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>jdkproxy</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">/**\r\n * 图书服务实现类\r\n * @author jason\r\n * @date 2019/2/14.\r\n */</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookServiceImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BookService</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token annotation punctuation\">@Override</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addBook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"新增图书\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>编写InvocationHandler实现类</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>jdkproxy</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">InvocationHandler</span></span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Method</span></span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">/**\r\n * JDK 动态代理\r\n * @author jason\r\n * @date 2019/2/14.\r\n */</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookServiceInvocationHandler</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">InvocationHandler</span> <span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Object</span> target<span class=\"token punctuation\">;</span>\r\n\r\n\r\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BookServiceInvocationHandler</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>target <span class=\"token operator\">=</span> target<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token annotation punctuation\">@Override</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> proxy<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Method</span> method<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Throwable</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"事务开始\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">Object</span> result <span class=\"token operator\">=</span> method<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"事务结束\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\t</code></pre></div>\n</li>\n<li>\n<p>运行测试程序</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>jdkproxy</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Proxy</span></span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">/**\r\n * JDK动态代理演示\r\n *\r\n * @author jason\r\n * @date 2019/2/14.\r\n */</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JdkProxyDemo</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">BookServiceInvocationHandler</span> invocationHandler <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BookServiceInvocationHandler</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">BookServiceImpl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// JDK 动态代理只支持接口</span>\r\n        <span class=\"token class-name\">BookService</span> bookServiceProxy <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">BookService</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">.</span><span class=\"token function\">newProxyInstance</span><span class=\"token punctuation\">(</span>\r\n                <span class=\"token class-name\">BookServiceImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span><span class=\"token function\">getClassLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token class-name\">BookServiceImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInterfaces</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                invocationHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        bookServiceProxy<span class=\"token punctuation\">.</span><span class=\"token function\">addBook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>运行结果</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">事务开始\r\n新增图书\r\n事务结束\r\n\r\n<span class=\"token class-name\">Process</span> finished <span class=\"token keyword\">with</span> <span class=\"token namespace\">exit</span> code <span class=\"token number\">0</span></code></pre></div>\n</li>\n</ol>\n<h4 id=\"cglib动态代理\" style=\"position:relative;\"><a href=\"#cglib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86\" aria-label=\"cglib动态代理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CGLIB动态代理</h4>\n<p>JDK的动态代理依靠接口实现，如果有些类并没有实现接口，则不能使用JDK代理，这时就要使用cglib动态代理了。使用cglib需要依赖<code class=\"language-text\">cglib</code>的jar，使用maven为例</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\r\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>cglib<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\r\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>cglib-nodep<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\r\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.2.4<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ol>\n<li>\n<p>定义图书服务类</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>cglibproxy</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">/**\r\n * @author jason\r\n * @date 2019/2/14.\r\n */</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookService</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addBook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"新增图书\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>编写MethodInterceptor实现类</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>cglibproxy</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">net<span class=\"token punctuation\">.</span>sf<span class=\"token punctuation\">.</span>cglib<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MethodInterceptor</span></span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">net<span class=\"token punctuation\">.</span>sf<span class=\"token punctuation\">.</span>cglib<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MethodProxy</span></span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Method</span></span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">/**\r\n * @author jason\r\n * @date 2019/2/14.\r\n */</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookServiceMethodInterceptor</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">MethodInterceptor</span> <span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token annotation punctuation\">@Override</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">intercept</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> o<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Method</span> method<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> objects<span class=\"token punctuation\">,</span> <span class=\"token class-name\">MethodProxy</span> methodProxy<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Throwable</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"事务开始\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        methodProxy<span class=\"token punctuation\">.</span><span class=\"token function\">invokeSuper</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">,</span> objects<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"事务结束\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>运行测试程序</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>cglibproxy</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">net<span class=\"token punctuation\">.</span>sf<span class=\"token punctuation\">.</span>cglib<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Enhancer</span></span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">/**\r\n * @author jason\r\n * @date 2019/2/14.\r\n */</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CglibProxyDemo</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">BookServiceMethodInterceptor</span> cglibInterceptor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BookServiceMethodInterceptor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token comment\">//cglib 强化剂</span>\r\n        <span class=\"token class-name\">Enhancer</span> enhancer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Enhancer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        enhancer<span class=\"token punctuation\">.</span><span class=\"token function\">setSuperclass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BookService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token comment\">// 创建代理对象</span>\r\n        enhancer<span class=\"token punctuation\">.</span><span class=\"token function\">setCallback</span><span class=\"token punctuation\">(</span>cglibInterceptor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">BookService</span> bookServiceProxy <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">BookService</span><span class=\"token punctuation\">)</span>enhancer<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        bookServiceProxy<span class=\"token punctuation\">.</span><span class=\"token function\">addBook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>运行结果</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">事务开始\r\n新增图书\r\n事务结束\r\n\r\nProcess finished with <span class=\"token builtin class-name\">exit</span> code <span class=\"token number\">0</span></code></pre></div>\n</li>\n</ol>\n<h2 id=\"spring-aop\" style=\"position:relative;\"><a href=\"#spring-aop\" aria-label=\"spring aop permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spring AOP</h2>\n<p>Spring 提供了4种 <code class=\"language-text\">AOP</code> 的支持，基于代理的经典SpringAOP，纯POJO切面，<code class=\"language-text\">@Aspect</code>注解驱动的切面，注入式AspectJ切面。前三种都是SpringAOP实现的变体，SpringAOP构建在动态代理基础之上，因此，Spring对AOP的支持局限于方法拦截。第四种实际是使用AspectJ的解决方案。提供了SpringAOP所不能支持的许多类型的切点。我们可以借助Spring的依赖注入把bean装配进AspectJ切面中。Spring借鉴了AspectJ的切面，以提供注解驱动的AOP。本质上，它依然是Spring基于代理的AOP。</p>\n<h4 id=\"使用code-classlanguage-textaspectcode创建切面类\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8code-classlanguage-textaspectcode%E5%88%9B%E5%BB%BA%E5%88%87%E9%9D%A2%E7%B1%BB\" aria-label=\"使用code classlanguage textaspectcode创建切面类 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用<code class=\"language-text\">@Aspect</code>创建切面类</h4>\n<p>Audience类使用<code class=\"language-text\">@Aspect</code>注解进行了标注。该注解表明Audience不仅仅是一个POJO，还是一个切面。Audience类中的方法都使用注解来定义切面的具体行为。Audience有四个方法，定义了一个观众在观看演出时可能会做的事情。在演出之前，观众要就坐（takeSeats()）并将手机调至静音状态（silenceCellPhones()）。如果演出很精彩的话，观众应该会鼓掌喝彩（applause()）。不过，如果演出没有达到观众预期的话，观众会要求退款（demandRefund()）。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/939d098eab4d3b643f1feab045d5aa62/47ff6/aspect-execution.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAz0lEQVR42nWQSQ6DMAxFe/8DIjEJiQVlCCCGBhIR0kdMu2r/woqd/2wnDx90nqfWet/3bduO46Dy+kjSdV2VUs65aZrmeR7HEfNDYJgkSfI8j+N4WRZMaZpGUUQKhoHWwNjwZFlGfRiGG6a9C8LENKK1lt7GGKIOoilXUmFTqAuG6bqubVsVxGJ1XVPp+16KpJw5UCRKlxumDZPJbZAJkvcjDmwOQOSWSRIvWP6gaZpnEBP8L8meZVkWRfH1XDBfV1UVJJHF/H8xnEmys/f+DbhjkZjevwT9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"aspect-execution\"\n        title=\"\"\n        src=\"/static/939d098eab4d3b643f1feab045d5aa62/fcda8/aspect-execution.png\"\n        srcset=\"/static/939d098eab4d3b643f1feab045d5aa62/12f09/aspect-execution.png 148w,\n/static/939d098eab4d3b643f1feab045d5aa62/e4a3f/aspect-execution.png 295w,\n/static/939d098eab4d3b643f1feab045d5aa62/fcda8/aspect-execution.png 590w,\n/static/939d098eab4d3b643f1feab045d5aa62/47ff6/aspect-execution.png 852w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7fae6f0dbe1b2740a41759d00873120d/b12f7/aspect-annotation.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAABYlAAAWJQFJUiTwAAABXklEQVR42oWT2W6DMBRE/f/fiJAQZd+XQFoIycETkNNG6Tw4xr7Xs9gxVVUNw9B13TiOtwPbtt0crOt6fwfjeV5RFEEQ+L6f5/mXRRRFcRyHYcicSV3Xbs9msTenaQptlmUqSg9wEM1N05ylb5iTJJmmaVmWHwtE3j+Cgy6XyzzPe3NZln3fQw5t27asfh/Q/GrB6TinkxV0kRRzg2H6+SgtmGQWHAQDojTSI12uNMMSaUOiOoHk+YSQCVuuZ/hZV/6GTglTNWddD0wOzkQwyF1w6DNtPoiNkXgRjBGlwPjLs57Ai2w3JOVENSNbite925dmQoKKqJUcI5w04xxHkLcWmsgaKuDY00Y9PdSRM528CprP5P7ePIowSM3OrBuXMUplUrHJju5JdmT7FG8g5GHCSWZ62HwicrRAka5ttqCMgPWWdtn8SKccUsoeK6pm3f1LscsWlc97/vcxf8ADVESb3ZKDdqYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"aspect-annotation\"\n        title=\"\"\n        src=\"/static/7fae6f0dbe1b2740a41759d00873120d/fcda8/aspect-annotation.png\"\n        srcset=\"/static/7fae6f0dbe1b2740a41759d00873120d/12f09/aspect-annotation.png 148w,\n/static/7fae6f0dbe1b2740a41759d00873120d/e4a3f/aspect-annotation.png 295w,\n/static/7fae6f0dbe1b2740a41759d00873120d/fcda8/aspect-annotation.png 590w,\n/static/7fae6f0dbe1b2740a41759d00873120d/efc66/aspect-annotation.png 885w,\n/static/7fae6f0dbe1b2740a41759d00873120d/b12f7/aspect-annotation.png 1020w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4 id=\"advice的5种注解\" style=\"position:relative;\"><a href=\"#advice%E7%9A%845%E7%A7%8D%E6%B3%A8%E8%A7%A3\" aria-label=\"advice的5种注解 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Advice的5种注解</h4>\n<table>\n<thead>\n<tr>\n<th><strong>注解</strong></th>\n<th align=\"left\"><strong>通知</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>@After</td>\n<td align=\"left\">通知方法会在目标方法返回或抛异常后调用</td>\n</tr>\n<tr>\n<td>@AfterReturning</td>\n<td align=\"left\">通知方法会在目标方法返回后调用</td>\n</tr>\n<tr>\n<td>@AfterThrowing</td>\n<td align=\"left\">通知方法会在目标方法抛异常后调用</td>\n</tr>\n<tr>\n<td>@Around</td>\n<td align=\"left\">通知方法会将目标方法封装起来</td>\n</tr>\n<tr>\n<td>@Before</td>\n<td align=\"left\">通知方法会在目标方法调用之前执行</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"使用code-classlanguage-textpointcutcode声明切点表达式\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8code-classlanguage-textpointcutcode%E5%A3%B0%E6%98%8E%E5%88%87%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F\" aria-label=\"使用code classlanguage textpointcutcode声明切点表达式 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用<code class=\"language-text\">@Pointcut</code>声明切点表达式</h4>\n<p>@Pointcut 声明使用频繁的切点表达式后，在通知注解中引用即可</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a723d35101f317dfb8cf65ebea67c597/ad997/pointcut.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.8108108108108%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAABYlAAAWJQFJUiTwAAABX0lEQVR42o2S6XKDQAyDef835FcgHC1XCfdRIPlYNZRS0qlmsvEylmzLazVNk2VZVVV5nrdt+3mGcRzneb7/ggXHdd0kSRzHCcMwiiLP84IgeDcgfjOAf0K+3W5kpGkqMuDq+z4EJIhp7f4Cltruuo6gMyBoDYg5+74/cKZp4junVZYlRZi5ruuiKAj4uizLvMNkoBgy+bZt44XFncofBokBEijWBgTSBcMwQEBF59o2f0wIHxoOMTOxulKTdKGyBMeZ+VETw7AdGgFnHMeSYH4qy2oSaJj632T0SBoM8Ea9LU9oWsVa+L7+OrOWqa1q53otShVNEidtq+b4BNdtVacP60dlJtzc1vCYjNy+LGkYTmuIHg2DBgcVAt5cZYAEhkF+WRlt2ht26A3E2V6L0rSFTW4l6zGz4ev1erlc8Az/KMv8VEZIfK50zpfNiC/DtKHNMxUnoNpfbZ8+nX/iASrl2JevXS4KAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pointcut\"\n        title=\"\"\n        src=\"/static/a723d35101f317dfb8cf65ebea67c597/fcda8/pointcut.png\"\n        srcset=\"/static/a723d35101f317dfb8cf65ebea67c597/12f09/pointcut.png 148w,\n/static/a723d35101f317dfb8cf65ebea67c597/e4a3f/pointcut.png 295w,\n/static/a723d35101f317dfb8cf65ebea67c597/fcda8/pointcut.png 590w,\n/static/a723d35101f317dfb8cf65ebea67c597/efc66/pointcut.png 885w,\n/static/a723d35101f317dfb8cf65ebea67c597/ad997/pointcut.png 1012w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"总结\" style=\"position:relative;\"><a href=\"#%E6%80%BB%E7%BB%93\" aria-label=\"总结 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>总结</h2>\n<ul>\n<li>面向切面编程是面向对象编程的一个强大的补充</li>\n<li>通过切面可以把分散在应用各处的行为放入可重用的模块中</li>\n<li>通过注解显示的声明在什么地方应用该行为</li>\n<li>有效减少冗余代码，让我们的类关注自身的主要功能</li>\n<li>动态代理模式和静态代理模式</li>\n<li>通过使用@Aspect注解和简单的配置，可以很简单的在Spring中装配advice和pointcut</li>\n</ul>\n<h2 id=\"参考文献\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\" aria-label=\"参考文献 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考文献</h2>\n<ul>\n<li>\n<p>Spring 实战（第4版）</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/14ee5ef7e032323c2b86aa07b8ea7185/c7dcc/spring-in-action.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAABGnAAARpwHTd0PhAAACPElEQVR42m1STWsTQRjObxHBgxcvgkWliuAhqbWG2AYjbdSotSIqGCJ+oLRQkIqXImiag4LabQqFRkmCBzUeNNRLiG3czbfbbJKd3dlsNnGzu5kmvt0gSMjDwAzPzDPv835YJEnSNE1RlHa7XTEBDJwzmQzP86VSCRhCSHcQLMvLVDQajcViFEWtrgaDKyvRSAT0gUDgfSjk9/vD4bCqqvC00+n0ixFfQXy52ZAFhFotTTd0iGMYBgiMNmlpmgoc2dEMAqtfPD1ltduGrnkm1CZSawX9T6Xb1UQRFwoFVlBoTkqxQprDW6zAcJIZ/3+x8+Ckbe+s1/FtfSm4eN8gum5oYDuVSgmimMvn4/E4nH9sbAiC0Gfe8ui248nd8fk7Yy98Zy5ctK69m6M3v9bkRjrNlMvc1uZPmqZ/s2wikUA8z7IsfARMMpmEGlsuux3nnafcrtOf1l9PjBzwP3/cJS0kiNlsNlep0SVca+xWi5CdHsg/gAXLDc+ox3ns+pXx0NLC7E0r/es7PBUExDAMy1WSKZrjys1mc3Crpt0jLvtRz+To22e+wNNLXz6/AbZardI0s73NyrJMzKCDxXbboZPD+11jRxYenA0FfWvUQ9LWMZZYE9Uqn8/n6/X64D6fOLzv+NCemalh6tVcLLL48cNLEZVELEGrcrlcsVjEGPeGZEDke96rt2bOzc96oT0NRcGSDBMCttMmIHMIC1cwp8D3i3sbWILETGO73qBC2ASMN3yEEIIUdF3vE/8F7v2S08YhMMcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"spring-in-action\"\n        title=\"\"\n        src=\"/static/14ee5ef7e032323c2b86aa07b8ea7185/fcda8/spring-in-action.png\"\n        srcset=\"/static/14ee5ef7e032323c2b86aa07b8ea7185/12f09/spring-in-action.png 148w,\n/static/14ee5ef7e032323c2b86aa07b8ea7185/e4a3f/spring-in-action.png 295w,\n/static/14ee5ef7e032323c2b86aa07b8ea7185/fcda8/spring-in-action.png 590w,\n/static/14ee5ef7e032323c2b86aa07b8ea7185/c7dcc/spring-in-action.png 641w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</li>\n<li>\n<p>Head First 设计模式</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 578px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/62b15bc85e14d0619683721bad1638b3/508ef/head-first-design-pattern.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAABFwAAARcAESNTyuAAACWklEQVR42nVS30/aUBjtP7vsYdme9rDnJZqZ+TLFmcUEpwuZywwJgmhkAkaoQqW0FGhLbYtQegultKVAoVDYF/ZDlm3n6btf7vnOvd85GM/zyWQyn8/fLJHJZLLZLMdx8XgcjqlUKhgMnpxEBUHo9XqJRALH8evr61AoRBAEZhgG8CmqyDBMu91GCEGhqiqME0WR49hU8pIiSaSqjuNQFMWyLE3TFxcXwMJYjg99PorGTkEEWqfx+Jevx6fxswHAcYbjqTH0OgNP6Y28mb9YwXw+x+hS6eDwU2BnZ3t7a3f3/dbWu+D+QSQa63R0ocYrWpesNXC6lmMb3Z5pWabv+/NfwKbTKYy5F+SrFH4Svkxf4tCFjmVZ1WpVaamiKBUI4kGWabqUI+4GI/e3ODaZTAZDJ5dh7vJUOp1hWYFnRdsamJbJc5zatVnVkvW+2O7XEBROs+s8kj3PQy2tXtc/brw63nxqGwp+VRbYhusOQRk2V6lUmHLZNE247c//+DY2Go6KeV5DrcPXT24/PJeIWKdrwFV4NhgmSZKmaT/Ws/gL2Nh1kWbcnB2dB9eE8x0RDxVvi5Kg9h1LWgIcbqnqzPeXIxarQzDfnz3Uu4VvkdxVAt3fcQVKaXRmMw/8B5/rslyiKdsy577/D2WSJAOB7c036+tr6y9fPNtYe7u3tx+JRCAwoKnpRkWo2yPPGk4c1zOcccd+NByDxITDYQggAOIBtFgsBoHVdV1pNjXDZiRE8s3SvVKRWmStKSDT9WY/yYv/oN/vy7KsIcRVKzWeZ2iqXKJbSnP12d8BoT+iSp4wbeEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"head-first-dp\"\n        title=\"\"\n        src=\"/static/62b15bc85e14d0619683721bad1638b3/508ef/head-first-design-pattern.png\"\n        srcset=\"/static/62b15bc85e14d0619683721bad1638b3/12f09/head-first-design-pattern.png 148w,\n/static/62b15bc85e14d0619683721bad1638b3/e4a3f/head-first-design-pattern.png 295w,\n/static/62b15bc85e14d0619683721bad1638b3/508ef/head-first-design-pattern.png 578w\"\n        sizes=\"(max-width: 578px) 100vw, 578px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</li>\n<li>\n<p><a href=\"https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E4%BE%A7%E9%9D%A2%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1\">https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E4%BE%A7%E9%9D%A2%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1</a></p>\n</li>\n<li>\n<p><a href=\"https://zh.wikipedia.org/wiki/%E6%A8%AA%E5%88%87%E5%85%B3%E6%B3%A8%E7%82%B9\">https://zh.wikipedia.org/wiki/%E6%A8%AA%E5%88%87%E5%85%B3%E6%B3%A8%E7%82%B9</a></p>\n</li>\n<li>\n<p><a href=\"https://juejin.im/post/5b06bf2df265da0de2574ee1\">https://juejin.im/post/5b06bf2df265da0de2574ee1</a></p>\n</li>\n<li>\n<p><a href=\"http://www.cnblogs.com/jqyp/archive/2010/08/20/1805041.html#3460821\">http://www.cnblogs.com/jqyp/archive/2010/08/20/1805041.html#3460821</a></p>\n</li>\n<li>\n<p><a href=\"http://blog.didispace.com/springbootaoplog/\">http://blog.didispace.com/springbootaoplog/</a></p>\n</li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#aop-%E6%A6%82%E8%BF%B0\">AOP 概述</a></p>\n</li>\n<li>\n<p><a href=\"#aop-%E6%9C%AF%E8%AF%AD\">AOP 术语</a></p>\n</li>\n<li>\n<p><a href=\"#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F\">代理模式</a></p>\n<ul>\n<li>\n<p><a href=\"#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86\">静态代理</a></p>\n</li>\n<li>\n<p><a href=\"#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86\">动态代理</a></p>\n<ul>\n<li><a href=\"#jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86\">Jdk动态代理</a></li>\n<li><a href=\"#cglib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86\">CGLIB动态代理</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#spring-aop\">Spring AOP</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#%E4%BD%BF%E7%94%A8code-classlanguage-textaspectcode%E5%88%9B%E5%BB%BA%E5%88%87%E9%9D%A2%E7%B1%BB\">使用<code class=\"language-text\">@Aspect</code>创建切面类</a></li>\n<li><a href=\"#advice%E7%9A%845%E7%A7%8D%E6%B3%A8%E8%A7%A3\">Advice的5种注解</a></li>\n<li><a href=\"#%E4%BD%BF%E7%94%A8code-classlanguage-textpointcutcode%E5%A3%B0%E6%98%8E%E5%88%87%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F\">使用<code class=\"language-text\">@Pointcut</code>声明切点表达式</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E6%80%BB%E7%BB%93\">总结</a></p>\n</li>\n<li>\n<p><a href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\">参考文献</a></p>\n</li>\n</ul>","frontmatter":{"title":"面向切面编程","tags":["coding"],"description":"面向切面编程知识点整理。","date":"2019-02-14"}}},"pageContext":{"slug":"/aspect-oriented-programming","previous":{"fields":{"slug":"/arts-30"},"frontmatter":{"title":"ARTS 第30周：N次重复元素算法、线程安全集合详解、10进制2进制计数法与面向切面编程入门","tags":["coding","arts"],"slug":"/arts-30"}},"next":{"fields":{"slug":"/about/"},"frontmatter":{"title":"关于","tags":null,"slug":null}}}},"staticQueryHashes":["2052298874"],"slicesMap":{}}