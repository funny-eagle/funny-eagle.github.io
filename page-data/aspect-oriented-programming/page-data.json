{"componentChunkName":"component---src-templates-blog-post-js","path":"/aspect-oriented-programming/","result":{"data":{"site":{"siteMetadata":{"title":"Funny Eagle","author":"Jason Yang"}},"markdownRemark":{"id":"4817b83f-f8b6-581b-9230-e199edbe32b8","excerpt":"AOP 被认为是对 OOP 的一个强大的补充，有了 AOP，我们可以把之前分散在应用各处的行为放在可重用的模块中，可以有效减少冗余代码，并让我们的类只关注自身的主要功能。 AOP 概述 面向切面编程…","html":"<blockquote>\n<p>AOP 被认为是对 OOP 的一个强大的补充，有了 AOP，我们可以把之前分散在应用各处的行为放在可重用的模块中，可以有效减少冗余代码，并让我们的类只关注自身的主要功能。</p>\n</blockquote>\n<h2 id=\"aop-概述\" style=\"position:relative;\"><a href=\"#aop-%E6%A6%82%E8%BF%B0\" aria-label=\"aop 概述 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AOP 概述</h2>\n<p>面向切面编程（aspect-oriented programming），是一种将横切关注点与业务逻辑分离的编程方式。每个横切关注点都集中在一个地方，而不是分散在多处代码中。这样使我们的服务模块更加简洁，因为它们只包含了主要关注点的代码，而次要的功能或者说辅助的功能被转移到切面中了。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5b6b3cd32e4a45bdce71d2e537773d2d/82158/aop-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABYlAAAWJQFJUiTwAAACRElEQVR42mWSy1MSAQCH96/olHnqT+hWpmZNhVJOMxR0aMqZ6tIMk6FS0KBBDyvSFh8YIoSmIgoomrDBBKMNIE/FTeS54LYIxHMHQhe2qSvf8Tff7fcBZB1E9TiRQ46rBEngRHHv31LKH6XC9SaQKvxxIEV3HHfHcFes6I2XLf4Qd+U25I8H99YL5tM2lIRNSlR41Y4SzkjGGc05ozl7OItmyoDOeXCGpT7P1pxja5u5ugv8jWsjm/dnblwCbX2T8oiuoQmM8QZH7dyWVlGYCm63gz6qyNf63qvY/AXsxvPCtYBIHwD1QVAfGIXiwwbvw0/XBw2wSq9yzjQOW/Kzsiljb8tHy++xb9FRY2zMFBvSR23BDGDyYVTBV4bwO+0tRP9gpg/9uDNh7pJ0MqRbAoXCM99Akx28Fo6bepsZMuSe1HdXCndNwbfGdxYdGGALpB9NWlmft7rldpbCwVJ4+5RWporGVHkml2cxwymmJimTSH7y27o1GGdp/9lSkKMOPpnfh3wpwBHOsKbdnDnv01k3R7nNXfA/17qYC7Qe9bZ8dT5haOxZSSukUph/ka1L9GsCPG2ofznEVgWMcAqAdpJtAxBlYJXyYp0i0Le/NNPEGw++dHaMWXkyGbJ28so48urdiIvb1CGO0MW7N8UwfQKmgjtzVgwoVYhk4SiNEymcSBYr2RLpQeDHi5etUX8uNI2bTqD5IgpJsDdn0XQhma8cZkuHuXIiW8LLx0D99bVaDctFqrXa/0j8JElWy/mjNFIfyV8nNLoWAA2TUgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"aop-demo\"\n        title=\"\"\n        src=\"/static/5b6b3cd32e4a45bdce71d2e537773d2d/fcda8/aop-1.png\"\n        srcset=\"/static/5b6b3cd32e4a45bdce71d2e537773d2d/12f09/aop-1.png 148w,\n/static/5b6b3cd32e4a45bdce71d2e537773d2d/e4a3f/aop-1.png 295w,\n/static/5b6b3cd32e4a45bdce71d2e537773d2d/fcda8/aop-1.png 590w,\n/static/5b6b3cd32e4a45bdce71d2e537773d2d/82158/aop-1.png 696w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>上图表示划分为三个服务模块的应用，每个模块提供相应的服务，而且这些模块都需要类似的辅助功能，例如日志、安全、事务等等。我们并不想在各个模块中写重复的日志、安全、事务的代码，那么就可以使用选用切面这个方案，来解决这个问题。</p>\n<h2 id=\"aop-术语\" style=\"position:relative;\"><a href=\"#aop-%E6%9C%AF%E8%AF%AD\" aria-label=\"aop 术语 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AOP 术语</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 552px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a812f60268ee472118ca1a75f2478f87/08c0b/aop-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.64864864864865%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaUlEQVR42qWR20sCQRTG/cN76ikIhF6CwreoMDDF1DLzsrOr3dBRN1yVLG1dvMTsziKse5szsatIWNBDH8M8nHN+8x2+ifB/KPKz1J3WUT9dllNISYu9rPSa0eiAcw4Af8MNtXjVOj7KRqOJ/TN0mOvE3j5lzrnnub7vs1BrGIBvHcYCB9wxY/GhNrM5X1fGmqaq49Hog1IzZGHjvFopwDlnrgeJbGdnLyc9jcMWW+28XFqO46zmAmfbZbbLLBeWLmxuy4FkQds9eJQausu45YQDHhDDXFjucL5cw8na9EIyiiiVFpVblM+I9YKQTEu9Ekqe5BShlsmjyjUSb1A5h2rnArmsTk9LE/l9EcDlll7A5n2zXsFqFcuoOXiW26g9ER4k8WVSww0JKyLuSrgj4n6xtbjDJI5mo7n9S9oAQHRTJ2Q+J9TQme9vDTAAsvC20g4jAWCM6YQYBjWpQSn1fS94L+yG4t8/+wsQryi+SYd0lgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"aop-demo\"\n        title=\"\"\n        src=\"/static/a812f60268ee472118ca1a75f2478f87/08c0b/aop-2.png\"\n        srcset=\"/static/a812f60268ee472118ca1a75f2478f87/12f09/aop-2.png 148w,\n/static/a812f60268ee472118ca1a75f2478f87/e4a3f/aop-2.png 295w,\n/static/a812f60268ee472118ca1a75f2478f87/08c0b/aop-2.png 552w\"\n        sizes=\"(max-width: 552px) 100vw, 552px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<p><code class=\"language-text\">advice</code> - 通知</p>\n<ul>\n<li>\n<blockquote>\n<p>切面的具体行为，即要切入执行的代码</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">pointcut</code> - 切点</p>\n<ul>\n<li>\n<blockquote>\n<p>通知被应用的具体位置</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">join point</code> - 连接点</p>\n<ul>\n<li>\n<blockquote>\n<p>程序运行时，能够应用通知的所有点</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">aspect</code> - 切面</p>\n<ul>\n<li>\n<blockquote>\n<p>什么时候在什么地方做什么事情，是切点和通知的结合</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">target</code> - 目标对象</p>\n<ul>\n<li>\n<blockquote>\n<p>被切入功能的目标对象</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">introduction</code> - 引入</p>\n<ul>\n<li>\n<blockquote>\n<p>将新的方法或属性引入到现有的类中</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">weaving</code> - 织入</p>\n<ul>\n<li>\n<blockquote>\n<p>把切面应用到目标对象并创建新的代理对象的过程</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"代理模式\" style=\"position:relative;\"><a href=\"#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F\" aria-label=\"代理模式 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>代理模式</h2>\n<p>代理模式是使用代理对象完成用户请求，屏蔽用户对真实对象访问的一种设计模式。现实生活中，代理人被授权执行当事人的一些事宜，无需当事人出面，从第三方的角度看，他只和代理人通信。而事实上代理人是要有当事人的授权，并且在核心问题上还需要请示当事人。</p>\n<p>AOP 就是使用代理模式实现的，其中的代理类就相当于AOP中的切面。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 533px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e5b64f7ca74b1ce8f0312fb2d991c27d/a1aa0/aop-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABO0lEQVR42mP4TwD8+////9+/f3/8+vbj149//8BCEOr/fwaEEnRNILEPn19vODOxe2dww3abpu32Uw4mHL696vefnxAlDP/+fP399fa/73f+fL317/fnf/////79++fPn9+//Xjx9knzhsDE2fJJU5wTJySlTEvKXmKTuUJx8YkaqM2/Xyz+sofh7jq299sYvtzv//z9/7evn75++/L////Dt1bnrVXKnV3sl33eNX6He+K+oMJjhUsCi9fpPn57C6z5w7HvV4I+Xoz5etH319vdf0HO+fP3H4i++fxU7ir1rAWeMY1zw8q3hVVsTujoy1pqXLfZ8dO3dwg/4wqqQzdX1G62zlutlL1CM3uFesEalfYdfjdfnAQH218GsKK/MPQPS5h9e3P+4Z59NxYeuLn02rPj3399hRsNAEXaWpGpmPbnAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"aop-demo\"\n        title=\"\"\n        src=\"/static/e5b64f7ca74b1ce8f0312fb2d991c27d/a1aa0/aop-3.png\"\n        srcset=\"/static/e5b64f7ca74b1ce8f0312fb2d991c27d/12f09/aop-3.png 148w,\n/static/e5b64f7ca74b1ce8f0312fb2d991c27d/e4a3f/aop-3.png 295w,\n/static/e5b64f7ca74b1ce8f0312fb2d991c27d/a1aa0/aop-3.png 533w\"\n        sizes=\"(max-width: 533px) 100vw, 533px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"静态代理\" style=\"position:relative;\"><a href=\"#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86\" aria-label=\"静态代理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>静态代理</h3>\n<p>之所以称为静态代理，是因为在程序运行前，代理类就已经存在了。</p>\n<p><strong>举个例子</strong></p>\n<p>一般艺人都需要助理，来帮他跑腿，演出前谈价格，演出后收钱，只有表演的时候艺人才亲自出马。</p>\n<ol>\n<li>\n<p>定义一个艺人接口</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>staticproxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * 艺人接口\n * @author jason\n * @date 2019/2/14.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Artist</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * 表演\n     */</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>定义艺人实现类刘德华</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>staticproxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * 艺人刘德华\n *\n * @author jason\n * @date 2019/2/14.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LiuDehua</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Artist</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">LiuDehua</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">LiuDehua</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LiuDehua</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"刘德华出场演唱笨小孩...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>编写代理类</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>staticproxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * 艺人助理（代理类）\n *\n * @author jason\n * @date 2019/2/14.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ArtistProxy</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Artist</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">LiuDehua</span> liuDehua<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">ArtistProxy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ArtistProxy</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LiuDehua</span> liuDehua<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>liuDehua <span class=\"token operator\">=</span> liuDehua<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"助理出面谈价格，签合同...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        liuDehua<span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"助理出面收钱...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>运行<code class=\"language-text\">main</code>方法，将艺人实例传入代理类的构造方法，然后调用代理类的<code class=\"language-text\">perform()</code></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>staticproxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * @author jason\n * @date 2019/2/14.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">StaticProxyDemo</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">LiuDehua</span> liuDehua <span class=\"token operator\">=</span> <span class=\"token class-name\">LiuDehua</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">ArtistProxy</span> proxy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArtistProxy</span><span class=\"token punctuation\">(</span>liuDehua<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        proxy<span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>运行结果</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">助理出面谈价格，签合同<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n刘德华出场演唱笨小孩<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n助理出面收钱<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token class-name\">Process</span> finished <span class=\"token keyword\">with</span> <span class=\"token namespace\">exit</span> code <span class=\"token number\">0</span></code></pre></div>\n</li>\n</ol>\n<p><strong>静态代理的缺点</strong></p>\n<p>假设主题接口中的方法很多，为每一个接口写一个代理方法也很麻烦。如果接口有变动，则真实主题和代理类都要修改，不利于系统维护；</p>\n<h3 id=\"动态代理\" style=\"position:relative;\"><a href=\"#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86\" aria-label=\"动态代理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>动态代理</h3>\n<p>动态代理是在程序运行时，利用Java反射机制动态的生成代理类的代理模式。</p>\n<h4 id=\"jdk动态代理\" style=\"position:relative;\"><a href=\"#jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86\" aria-label=\"jdk动态代理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jdk动态代理</h4>\n<ul>\n<li>JDK的动态代理依靠接口实现</li>\n<li>如果类并没有实现接口，则不能使用Jdk的动态代理</li>\n</ul>\n<ol>\n<li>\n<p>定义图书服务接口</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>jdkproxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * 图书服务接口\n * @author jason\n * @date 2019/2/14.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">BookService</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * 新增图书接口\n     */</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">addBook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>编写图书服务实现类</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>jdkproxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * 图书服务实现类\n * @author jason\n * @date 2019/2/14.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookServiceImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BookService</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addBook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"新增图书\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>编写InvocationHandler实现类</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>jdkproxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">InvocationHandler</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Method</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * JDK 动态代理\n * @author jason\n * @date 2019/2/14.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookServiceInvocationHandler</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">InvocationHandler</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Object</span> target<span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BookServiceInvocationHandler</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>target <span class=\"token operator\">=</span> target<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> proxy<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Method</span> method<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Throwable</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"事务开始\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Object</span> result <span class=\"token operator\">=</span> method<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"事务结束\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\t</code></pre></div>\n</li>\n<li>\n<p>运行测试程序</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>jdkproxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Proxy</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * JDK动态代理演示\n *\n * @author jason\n * @date 2019/2/14.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JdkProxyDemo</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">BookServiceInvocationHandler</span> invocationHandler <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BookServiceInvocationHandler</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">BookServiceImpl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// JDK 动态代理只支持接口</span>\n        <span class=\"token class-name\">BookService</span> bookServiceProxy <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">BookService</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">.</span><span class=\"token function\">newProxyInstance</span><span class=\"token punctuation\">(</span>\n                <span class=\"token class-name\">BookServiceImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span><span class=\"token function\">getClassLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token class-name\">BookServiceImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInterfaces</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                invocationHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        bookServiceProxy<span class=\"token punctuation\">.</span><span class=\"token function\">addBook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>运行结果</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">事务开始\n新增图书\n事务结束\n\n<span class=\"token class-name\">Process</span> finished <span class=\"token keyword\">with</span> <span class=\"token namespace\">exit</span> code <span class=\"token number\">0</span></code></pre></div>\n</li>\n</ol>\n<h4 id=\"cglib动态代理\" style=\"position:relative;\"><a href=\"#cglib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86\" aria-label=\"cglib动态代理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CGLIB动态代理</h4>\n<p>JDK的动态代理依靠接口实现，如果有些类并没有实现接口，则不能使用JDK代理，这时就要使用cglib动态代理了。使用cglib需要依赖<code class=\"language-text\">cglib</code>的jar，使用maven为例</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>cglib<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>cglib-nodep<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.2.4<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ol>\n<li>\n<p>定义图书服务类</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>cglibproxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * @author jason\n * @date 2019/2/14.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookService</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addBook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"新增图书\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>编写MethodInterceptor实现类</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>cglibproxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">net<span class=\"token punctuation\">.</span>sf<span class=\"token punctuation\">.</span>cglib<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MethodInterceptor</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">net<span class=\"token punctuation\">.</span>sf<span class=\"token punctuation\">.</span>cglib<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MethodProxy</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Method</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * @author jason\n * @date 2019/2/14.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookServiceMethodInterceptor</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">MethodInterceptor</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">intercept</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> o<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Method</span> method<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> objects<span class=\"token punctuation\">,</span> <span class=\"token class-name\">MethodProxy</span> methodProxy<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Throwable</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"事务开始\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        methodProxy<span class=\"token punctuation\">.</span><span class=\"token function\">invokeSuper</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">,</span> objects<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"事务结束\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>运行测试程序</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>cglibproxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">net<span class=\"token punctuation\">.</span>sf<span class=\"token punctuation\">.</span>cglib<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Enhancer</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * @author jason\n * @date 2019/2/14.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CglibProxyDemo</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">BookServiceMethodInterceptor</span> cglibInterceptor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BookServiceMethodInterceptor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//cglib 强化剂</span>\n        <span class=\"token class-name\">Enhancer</span> enhancer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Enhancer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        enhancer<span class=\"token punctuation\">.</span><span class=\"token function\">setSuperclass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BookService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// 创建代理对象</span>\n        enhancer<span class=\"token punctuation\">.</span><span class=\"token function\">setCallback</span><span class=\"token punctuation\">(</span>cglibInterceptor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">BookService</span> bookServiceProxy <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">BookService</span><span class=\"token punctuation\">)</span>enhancer<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        bookServiceProxy<span class=\"token punctuation\">.</span><span class=\"token function\">addBook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>运行结果</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">事务开始\n新增图书\n事务结束\n\nProcess finished with <span class=\"token builtin class-name\">exit</span> code <span class=\"token number\">0</span></code></pre></div>\n</li>\n</ol>\n<h2 id=\"spring-aop\" style=\"position:relative;\"><a href=\"#spring-aop\" aria-label=\"spring aop permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spring AOP</h2>\n<p>Spring 提供了4种 <code class=\"language-text\">AOP</code> 的支持，基于代理的经典SpringAOP，纯POJO切面，<code class=\"language-text\">@Aspect</code>注解驱动的切面，注入式AspectJ切面。前三种都是SpringAOP实现的变体，SpringAOP构建在动态代理基础之上，因此，Spring对AOP的支持局限于方法拦截。第四种实际是使用AspectJ的解决方案。提供了SpringAOP所不能支持的许多类型的切点。我们可以借助Spring的依赖注入把bean装配进AspectJ切面中。Spring借鉴了AspectJ的切面，以提供注解驱动的AOP。本质上，它依然是Spring基于代理的AOP。</p>\n<h4 id=\"使用code-classlanguage-textaspectcode创建切面类\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8code-classlanguage-textaspectcode%E5%88%9B%E5%BB%BA%E5%88%87%E9%9D%A2%E7%B1%BB\" aria-label=\"使用code classlanguage textaspectcode创建切面类 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用<code class=\"language-text\">@Aspect</code>创建切面类</h4>\n<p>Audience类使用<code class=\"language-text\">@Aspect</code>注解进行了标注。该注解表明Audience不仅仅是一个POJO，还是一个切面。Audience类中的方法都使用注解来定义切面的具体行为。Audience有四个方法，定义了一个观众在观看演出时可能会做的事情。在演出之前，观众要就坐（takeSeats()）并将手机调至静音状态（silenceCellPhones()）。如果演出很精彩的话，观众应该会鼓掌喝彩（applause()）。不过，如果演出没有达到观众预期的话，观众会要求退款（demandRefund()）。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/939d098eab4d3b643f1feab045d5aa62/47ff6/aspect-execution.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6UlEQVR42nWQwW7DIAxA+/8fGImmUaUcElpMEcEYB2HYCt1O2ztYsuVn2b60Tq2ViJg5pVRKaa3FH0aKiAAgIt774zicc8x8GXJK6Xq9LsuilAohiMg8z9M0KaUQsbVGRACQUlqW5Xa7KaVer9dHLqVIh4hijESUc2bm8zyZmTohhBjjqNRaW2tvWUSMMc/nEzree621McZaO4paa2stABhjAGBM+ci11lJKjDF3zs64P6XEzIgYQkDEnLOIjPiWxw8ej8fesda2vxh7rut6v99/e96yc27btn3ft20zxrT/QUTv/dj5W/4CuGORmDvZQK4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"aspect-execution\"\n        title=\"\"\n        src=\"/static/939d098eab4d3b643f1feab045d5aa62/fcda8/aspect-execution.png\"\n        srcset=\"/static/939d098eab4d3b643f1feab045d5aa62/12f09/aspect-execution.png 148w,\n/static/939d098eab4d3b643f1feab045d5aa62/e4a3f/aspect-execution.png 295w,\n/static/939d098eab4d3b643f1feab045d5aa62/fcda8/aspect-execution.png 590w,\n/static/939d098eab4d3b643f1feab045d5aa62/47ff6/aspect-execution.png 852w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7fae6f0dbe1b2740a41759d00873120d/b12f7/aspect-annotation.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAABYlAAAWJQFJUiTwAAABj0lEQVR42oWT3W6sMAyEef9nXK20YhN+nACOHRwCpEfg7oqeVu13EeXCVmbGTuW9JyJEZOb9RSllv7Bt28dPVLfbDQAej8f9fu/7/nlijLHW1nX9fD6ttcMwXHvKydHcti0idl2nRe2Lvu/ruh7H8V36w8tN08zzvK5rPtn3/eNXSikxRhE5mp1zIQREHIZhmiYRWV7oPZ2s67ptWyllWZa2bb33pZQKAJxz3nt34r3vTqZpijHO86znsiyq6yqtyjkTkYhoncLM8zynlJhZRK6et21LKWn+FRGpMK3OOacX84V3IohojGHmz7SNMU3TGGPquu66DgA0hRDCf551Bb7IvoakOaWURCTnrPFeZ/ul2TkHAMMwaHIAgIgppRgjEYUQphO9qLV1XZdlOdJmZuccEXnvAWAcR0R8J/d98iJijEHE42WduBrLOatJjU3t6JzUjtp+i6+899ZaAGiaRhfbWhtC4BMi0rHJCQC0bau7dMgWEdWpDpl5miZE1OoY4/VLMTMiEtHnnP9c5l/4B1REm91UTTaNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"aspect-annotation\"\n        title=\"\"\n        src=\"/static/7fae6f0dbe1b2740a41759d00873120d/fcda8/aspect-annotation.png\"\n        srcset=\"/static/7fae6f0dbe1b2740a41759d00873120d/12f09/aspect-annotation.png 148w,\n/static/7fae6f0dbe1b2740a41759d00873120d/e4a3f/aspect-annotation.png 295w,\n/static/7fae6f0dbe1b2740a41759d00873120d/fcda8/aspect-annotation.png 590w,\n/static/7fae6f0dbe1b2740a41759d00873120d/efc66/aspect-annotation.png 885w,\n/static/7fae6f0dbe1b2740a41759d00873120d/b12f7/aspect-annotation.png 1020w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4 id=\"advice的5种注解\" style=\"position:relative;\"><a href=\"#advice%E7%9A%845%E7%A7%8D%E6%B3%A8%E8%A7%A3\" aria-label=\"advice的5种注解 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Advice的5种注解</h4>\n<table>\n<thead>\n<tr>\n<th><strong>注解</strong></th>\n<th align=\"left\"><strong>通知</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>@After</td>\n<td align=\"left\">通知方法会在目标方法返回或抛异常后调用</td>\n</tr>\n<tr>\n<td>@AfterReturning</td>\n<td align=\"left\">通知方法会在目标方法返回后调用</td>\n</tr>\n<tr>\n<td>@AfterThrowing</td>\n<td align=\"left\">通知方法会在目标方法抛异常后调用</td>\n</tr>\n<tr>\n<td>@Around</td>\n<td align=\"left\">通知方法会将目标方法封装起来</td>\n</tr>\n<tr>\n<td>@Before</td>\n<td align=\"left\">通知方法会在目标方法调用之前执行</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"使用code-classlanguage-textpointcutcode声明切点表达式\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8code-classlanguage-textpointcutcode%E5%A3%B0%E6%98%8E%E5%88%87%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F\" aria-label=\"使用code classlanguage textpointcutcode声明切点表达式 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用<code class=\"language-text\">@Pointcut</code>声明切点表达式</h4>\n<p>@Pointcut 声明使用频繁的切点表达式后，在通知注解中引用即可</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a723d35101f317dfb8cf65ebea67c597/ad997/pointcut.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.8108108108108%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAABYlAAAWJQFJUiTwAAABk0lEQVR42o2SzZLjIAyE/f5vmFPiYENiTLAB8Q+eCpp4slnP1n4Hlw+01FKrAwAhhNZaSmmtTUfEGEsp2190Usq+7znnl8uFUnq/3wkh4zjeGoQQ1ogxHoiXZSGEzPOMYkopIWQYBsbYOI6EEADYfqFD2845AHANALAN55y11nv/ock5W2tzzp1SijGmtTbGrOuqtc4511rLG7mB/9u2McZOp1NKqSulCCEeDd5Y11UpZRpKKaxrjAkhpJRyzvh92s45D8MghOCc3243SqkQAl2hyVortq21fs68bdvj8ZjnWUophJjnWQgxTROWAACtNa5aSskYCyH8iGut1trQ8N6jt/oCp8V/DPy9/3NmDBNTxczxWvApyrDEgW3sGV+EEPaoDg/rj87TNO3bxuGVUt7797alFGMMIcRa+7kwzrmUcpomzvmyLLqhlAKAlNKvnWutzrnwhm+gZr8WfIYp7OWeYjxmSun1ej2fz33fM8aUUjFGAPDeoz7GaIwBgH0R3wvDhPadYfMYo3PuX7YPT+c/+QIq5diX7Fi76QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pointcut\"\n        title=\"\"\n        src=\"/static/a723d35101f317dfb8cf65ebea67c597/fcda8/pointcut.png\"\n        srcset=\"/static/a723d35101f317dfb8cf65ebea67c597/12f09/pointcut.png 148w,\n/static/a723d35101f317dfb8cf65ebea67c597/e4a3f/pointcut.png 295w,\n/static/a723d35101f317dfb8cf65ebea67c597/fcda8/pointcut.png 590w,\n/static/a723d35101f317dfb8cf65ebea67c597/efc66/pointcut.png 885w,\n/static/a723d35101f317dfb8cf65ebea67c597/ad997/pointcut.png 1012w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"总结\" style=\"position:relative;\"><a href=\"#%E6%80%BB%E7%BB%93\" aria-label=\"总结 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>总结</h2>\n<ul>\n<li>面向切面编程是面向对象编程的一个强大的补充</li>\n<li>通过切面可以把分散在应用各处的行为放入可重用的模块中</li>\n<li>通过注解显示的声明在什么地方应用该行为</li>\n<li>有效减少冗余代码，让我们的类关注自身的主要功能</li>\n<li>动态代理模式和静态代理模式</li>\n<li>通过使用@Aspect注解和简单的配置，可以很简单的在Spring中装配advice和pointcut</li>\n</ul>\n<h2 id=\"参考文献\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\" aria-label=\"参考文献 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考文献</h2>\n<ul>\n<li>\n<p>Spring 实战（第4版）</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/14ee5ef7e032323c2b86aa07b8ea7185/c7dcc/spring-in-action.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAABGnAAARpwHTd0PhAAACSElEQVR42m2STWsTURSG81tEcOHGjWBRqSK4aGutpbbFSFs1aq2ICpaKHygtFKTipgiaZqGgNk2h0ChJcKHGhYa6KbEd7+Rr6u1M5vsmmYyTmTs3c6VTBAl5Nmf18L6ccwIIIdu2DcNwXVf0QQi5rpvP52VZ5nleFEVCCG1HYHExmkql0ul0NBpdXo7FlpZSySRCKBKJvI/Hw+FwIpGwLItS6nleq6zIoiKXzXpVVZRGw3awQwjBGFuWhV3SsG3LdjBp2pjYuDU/MD7a1d/dcS00ZJmKVeGcPyKltqbpHMdB1QACYqCaE/RNqLIC8vP/l4cPjnTvnZ4c+La6EJu/j4njYBshxDCMqmnFUimTyTAM82NtTVXVlvKBR7cHntwdnL3T92LqzIWLXSvvZsDG10q1nsux5bKwufETAPAbwvX1dUWWIYQMwwAAstmsYRiBy2MD54dPjQVPf1p9PdRzIPz8MSUNRdUKhUJRrABer9R3tkVIcxfyD8/zAjdCvaHhY9evDMYX5qZvdoFf3ymlqqqwLAsFMcsAQSibptn+VONjPcH+o6GR3rfPpiJPL335/IZSKkkSAOz2NqxWq8QPbS/3dx862bk/2Hdk7sHZeGxqJfqQuI6uI+gjSXKpVKrVau3vfOLwvuMdeyZGO6OvZtLJ+Y8fXmoKr+mI47hisbi1taXr+u6TtEm+N3n11sS52elJhFDdMHRUxRhLkpTzYVm2VqshhHiexxi3yrvD87xms+kX2+lmmqbuI8uyJEmKokAIHcdpkf8C7v2S02Tg/DwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"spring-in-action\"\n        title=\"\"\n        src=\"/static/14ee5ef7e032323c2b86aa07b8ea7185/fcda8/spring-in-action.png\"\n        srcset=\"/static/14ee5ef7e032323c2b86aa07b8ea7185/12f09/spring-in-action.png 148w,\n/static/14ee5ef7e032323c2b86aa07b8ea7185/e4a3f/spring-in-action.png 295w,\n/static/14ee5ef7e032323c2b86aa07b8ea7185/fcda8/spring-in-action.png 590w,\n/static/14ee5ef7e032323c2b86aa07b8ea7185/c7dcc/spring-in-action.png 641w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</li>\n<li>\n<p>Head First 设计模式</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 578px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/62b15bc85e14d0619683721bad1638b3/508ef/head-first-design-pattern.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAABFwAAARcAESNTyuAAACaElEQVR42nWR3U/aYBjF+88uu1i2q13seolmZt7Mj5nFBKcLmUZDUopoYFKNWKRIaSm0fXlti1DaQil9oQWk0HaJ+9Bl2+/+nPOc82AAgFwuR9N04YF8Pn91dSVJUjqdLhQKJEnGYrFkkoAQDgaDbDZLUdTl5WU8Hi+VSpht2wAAlq3wPN/tdg3D4Hle13WapmVZliSRzJ2xDGPouuu6LMuKoshxXCaTAQBgogTiX/eJ1DFJkplM5jidPjg8Ok6feJ7nue74fm6P/Z7na4OJvwiiJ4RhiHHV6u7el43NzfX1ta2tj2trH2I7uziR6vUs2ACa2WcaLYprFMVWf+Ag5ARBEP4Cm8/nURTdQvWCpJKJs/MzKgzDKIoQQoIgaB1dlpVyqXSnqhxXLZZuvMn0dzg2m828sVvM8zc0e36eF0UIRHmIPAc5QJL0/lDUkWqN5O6oYSDVctt991Hs+77RMZtN6/PKm6PV50Nboy5qUGxNp2NBEHRdr9frfK3mOE4URUH4R21sMp5UaGAanb23z64/vVRKqV7fdhwHISRJkqIopmn+mCf6C+x+OjVMu3CyfxpbgqebMhWvXFcUqI9cpDwAIezo+iIIHiyipyZYECzumv3yN7x4kTVub6Qyq7V6i4Vv27Ysy01VrXLsEDlhEPwjmWGYjY311XfLy0vLr1+9WFl6v729g+N4t9uFEJqWXYfN4cRH45k79W33vjd8fDgmimIikUgmCYIgDg6PcBxPpVK5XM6yLK3dNu0hrxgMaFdvtbrSYRptaDhTf/FTHP2H0WikqqppGJJQbwDAc2ytynW09tOzvwOhP6JKPYt7EQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"head-first-dp\"\n        title=\"\"\n        src=\"/static/62b15bc85e14d0619683721bad1638b3/508ef/head-first-design-pattern.png\"\n        srcset=\"/static/62b15bc85e14d0619683721bad1638b3/12f09/head-first-design-pattern.png 148w,\n/static/62b15bc85e14d0619683721bad1638b3/e4a3f/head-first-design-pattern.png 295w,\n/static/62b15bc85e14d0619683721bad1638b3/508ef/head-first-design-pattern.png 578w\"\n        sizes=\"(max-width: 578px) 100vw, 578px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</li>\n<li>\n<p><a href=\"https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E4%BE%A7%E9%9D%A2%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1\">https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E4%BE%A7%E9%9D%A2%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1</a></p>\n</li>\n<li>\n<p><a href=\"https://zh.wikipedia.org/wiki/%E6%A8%AA%E5%88%87%E5%85%B3%E6%B3%A8%E7%82%B9\">https://zh.wikipedia.org/wiki/%E6%A8%AA%E5%88%87%E5%85%B3%E6%B3%A8%E7%82%B9</a></p>\n</li>\n<li>\n<p><a href=\"https://juejin.im/post/5b06bf2df265da0de2574ee1\">https://juejin.im/post/5b06bf2df265da0de2574ee1</a></p>\n</li>\n<li>\n<p><a href=\"http://www.cnblogs.com/jqyp/archive/2010/08/20/1805041.html#3460821\">http://www.cnblogs.com/jqyp/archive/2010/08/20/1805041.html#3460821</a></p>\n</li>\n<li>\n<p><a href=\"http://blog.didispace.com/springbootaoplog/\">http://blog.didispace.com/springbootaoplog/</a></p>\n</li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#aop-%E6%A6%82%E8%BF%B0\">AOP 概述</a></p>\n</li>\n<li>\n<p><a href=\"#aop-%E6%9C%AF%E8%AF%AD\">AOP 术语</a></p>\n</li>\n<li>\n<p><a href=\"#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F\">代理模式</a></p>\n<ul>\n<li>\n<p><a href=\"#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86\">静态代理</a></p>\n</li>\n<li>\n<p><a href=\"#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86\">动态代理</a></p>\n<ul>\n<li><a href=\"#jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86\">Jdk动态代理</a></li>\n<li><a href=\"#cglib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86\">CGLIB动态代理</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#spring-aop\">Spring AOP</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#%E4%BD%BF%E7%94%A8code-classlanguage-textaspectcode%E5%88%9B%E5%BB%BA%E5%88%87%E9%9D%A2%E7%B1%BB\">使用<code class=\"language-text\">@Aspect</code>创建切面类</a></li>\n<li><a href=\"#advice%E7%9A%845%E7%A7%8D%E6%B3%A8%E8%A7%A3\">Advice的5种注解</a></li>\n<li><a href=\"#%E4%BD%BF%E7%94%A8code-classlanguage-textpointcutcode%E5%A3%B0%E6%98%8E%E5%88%87%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F\">使用<code class=\"language-text\">@Pointcut</code>声明切点表达式</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E6%80%BB%E7%BB%93\">总结</a></p>\n</li>\n<li>\n<p><a href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\">参考文献</a></p>\n</li>\n</ul>","frontmatter":{"title":"面向切面编程","tags":["coding"],"description":"面向切面编程知识点整理。","date":"2019-02-14"}}},"pageContext":{"slug":"/aspect-oriented-programming","previous":{"fields":{"slug":"/arts-30"},"frontmatter":{"title":"ARTS 第30周","tags":["coding","arts"],"slug":"/arts-30"}},"next":{"fields":{"slug":"/about/"},"frontmatter":{"title":"关于","tags":null,"slug":null}}}},"staticQueryHashes":["2052298874"],"slicesMap":{}}