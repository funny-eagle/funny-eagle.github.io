{"componentChunkName":"component---src-templates-blog-post-js","path":"/arts-24/","result":{"data":{"site":{"siteMetadata":{"title":"Funny Eagle","author":"Jason Yang"}},"markdownRemark":{"id":"9723f46f-f8bb-5c82-a4c2-e1280832eda3","excerpt":"Algorithm Review Netty User guide discard server echo server time server Tip 使用 datax 将 mysql 数据导入 …","html":"<h2 id=\"algorithm\" style=\"position:relative;\"><a href=\"#algorithm\" aria-label=\"algorithm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Algorithm</h2>\n<pre><code class=\"language-java\">package org.nocoder.leetcode.solution;\n\n/**\n * 28. Implement strStr()\n * &#x3C;p>\n * Return the index of the first occurrence of needle in haystack, or -1 if needle is not part of haystack.\n * &#x3C;p>\n * Example 1:\n * &#x3C;p>\n * Input: haystack = \"hello\", needle = \"ll\"\n * Output: 2\n * Example 2:\n * &#x3C;p>\n * Input: haystack = \"aaaaa\", needle = \"bba\"\n * Output: -1\n * Clarification:\n * &#x3C;p>\n * What should we return when needle is an empty string?\n * This is a great question to ask during an interview.\n * &#x3C;p>\n * For the purpose of this problem, we will return 0 when needle is an empty string.\n * This is consistent to C's strstr() and Java's indexOf().\n *\n * @author yangjinlong\n * @date 2018-12-17\n */\npublic class ImplementStrStr {\n    public int strStr(String haystack, String needle) {\n        char[] haystackArr = haystack.toCharArray();\n        char[] needleArr = needle.toCharArray();\n\n        if (needleArr.length == 0) {\n            return 0;\n        }\n\n        for (int i = 0; i &#x3C; haystackArr.length - needleArr.length + 1; i++) {\n            if (checkMatchingAtIndex(haystackArr, needleArr, i)) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    private boolean checkMatchingAtIndex(char[] haystackArr, char[] needleArr, int idx) {\n\n        for (int i = 0; i &#x3C; needleArr.length; i++) {\n            if (haystackArr[i + idx] != needleArr[i]) {\n                return false;\n            }\n        }\n\n        return true;\n\n    }\n\n    public static void main(String[] args) {\n        ImplementStrStr implementStrStr = new ImplementStrStr();\n        System.out.println(implementStrStr.strStr(\"hello\", \"llo\"));\n        System.out.println(implementStrStr.strStr(\"aaaaaa\", \"bba\"));\n        System.out.println(implementStrStr.strStr(\"bbbbbb\", \"\"));\n        System.out.println(implementStrStr.strStr(\"mississipp\", \"issip\"));\n    }\n}\n\n</code></pre>\n<h2 id=\"review\" style=\"position:relative;\"><a href=\"#review\" aria-label=\"review permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Review</h2>\n<h3 id=\"netty-user-guide\" style=\"position:relative;\"><a href=\"#netty-user-guide\" aria-label=\"netty user guide permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://netty.io/wiki/user-guide-for-4.x.html#wiki-h2-0\">Netty User guide</a></h3>\n<ul>\n<li>discard server</li>\n<li>echo server</li>\n<li>time server</li>\n</ul>\n<h2 id=\"tip\" style=\"position:relative;\"><a href=\"#tip\" aria-label=\"tip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tip</h2>\n<h3 id=\"使用-datax-将-mysql-数据导入-elasticsearch\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8-datax-%E5%B0%86-mysql-%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5-elasticsearch\" aria-label=\"使用 datax 将 mysql 数据导入 elasticsearch permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用 datax 将 mysql 数据导入 elasticsearch</h3>\n<ul>\n<li>\n<p>访问 <a href=\"http://47.106.164.212:9100/\">es-head</a> 查看当前使用的 index</p>\n</li>\n<li>\n<p>删除没用的 <code>index</code> ，发送 HTTP <code>DELETE</code> 请求</p>\n<ul>\n<li><a href=\"http://47.106.164.212:9200/yuntu_librarys_v2\">http://47.106.164.212:9200/yuntu_librarys_v2</a></li>\n</ul>\n</li>\n<li>\n<p>创建<code>index</code>，发送 HTTP <code>PUT</code> 请求</p>\n<ul>\n<li>\n<p><a href=\"http://47.106.164.212:9200/yuntu_librarys_v2\">http://47.106.164.212:9200/yuntu_librarys_v2</a></p>\n</li>\n<li>\n<pre><code class=\"language-json\">{\n    \"index\": {\n       \"number_of_shards\": \"1\",\n      \"number_of_replicas\": \"0\",\n      \"refresh_interval\": \"10s\"\n    }\n}\n</code></pre>\n</li>\n<li>\n<p><a href=\"http://47.106.164.212:9200/yuntu_library_books_v2\">http://47.106.164.212:9200/yuntu_library_books_v2</a></p>\n<pre><code class=\"language-json\">{\n    \"index\": {\n       \"number_of_shards\": \"1\",\n      \"number_of_replicas\": \"0\",\n      \"refresh_interval\": \"10s\"\n    }\n}\n</code></pre>\n</li>\n<li></li>\n</ul>\n</li>\n<li>\n<p>发送 HTTP <code>POST</code> 请求，添加 mapping</p>\n<ul>\n<li>\n<p><a href=\"http://47.106.164.212:9200/yuntu_librarys_v2/doc/_mapping?pretty\">http://47.106.164.212:9200/yuntu_librarys_v2/doc/_mapping?pretty</a></p>\n</li>\n<li>\n<pre><code class=\"language-json\">{\n    \"doc\": {\n            \"properties\" : {\n                    \"id\" : {\n                        \"type\" : \"integer\"             \n                    },\n                    \"isbn\" : {\n                         \"type\" : \"keyword\"                                       \n                    },\n                    \"price\" : {\n                         \"type\" : \"double\"                                                                \n                    },\n                   \"bookId\" : {\n                         \"type\" : \"integer\"                     \n                    },\n                    \"operUser\" : {\n                         \"type\" : \"integer\"                     \n                    },\n                    \"customerId\" : {\n                         \"type\" : \"integer\"                     \n                    },\n                    \"barNumber\" : {\n                         \"type\" : \"text\",\n                         \"analyzer\": \"keyword\"               \n                    },\n                    \"isChecked\" : {\n                         \"type\" : \"text\",\n                         \"analyzer\": \"keyword\"               \n                    },\n                   \"checkedDate\" : {\n                         \"type\" : \"text\",\n                         \"analyzer\": \"keyword\"               \n                    },\n                    \"frameCode\" : {\n                         \"type\" : \"text\",\n                         \"analyzer\": \"keyword\"                                                 \n                    },\n         \n                    \"isEffective\" : {\n                         \"type\" : \"text\",\n                         \"analyzer\": \"keyword\"                                                 \n                    },\n                    \"bookName\" : {\n                        \"type\" : \"text\",\n                         \"analyzer\": \"keyword\"          \n                    },\n                    \"author\" : {\n                        \"type\" : \"text\",\n                         \"analyzer\": \"keyword\"                                              \n                    },\n                    \"publisher\" : {\n                       \"type\" : \"text\",\n                         \"analyzer\": \"keyword\"      \n                    },\n                    \"publishDate\" : {\n                       \"type\" : \"text\",\n                         \"analyzer\": \"keyword\"                                    \n                    },\n                   \"storageTime\" : {\n                       \"type\" : \"text\",\n                         \"analyzer\": \"keyword\"                                    \n                    },\n                    \"categoryCode\" : {\n                      \"type\" : \"text\",\n                         \"analyzer\": \"keyword\"      \n                    },\n                    \"catalogueDate\" : {\n                       \"type\" : \"text\",\n                         \"analyzer\": \"keyword\"                                           \n                    },\n                    \"bookState\" : {\n                        \"type\" : \"text\",\n                         \"analyzer\": \"keyword\"                                       \n                    },\n                   \"storeRoom\" : {\n                        \"type\" : \"text\",\n                         \"analyzer\": \"keyword\"                                         \n                    },\n             \n                    \"borrowNum\":{\n                       \"type\" : \"integer\"  \n                   },\n                 \"canAppoint\":{\n                       \"type\" : \"integer\"  \n                   },\n                  \n                     \"praiseNum\":{\n                        \"type\" : \"integer\"  \n                   },\n                    \"libCode\":{\n                        \"type\" : \"text\",\n                         \"analyzer\": \"keyword\" \n                   },\n                   \n                    \"belongLibraryHallCode\":{\n                        \"type\" : \"text\",\n                         \"analyzer\": \"keyword\" \n                   },\n                    \"callNumber\":{\n                        \"type\" : \"text\",\n                         \"analyzer\": \"keyword\" \n                   },\n                    \"solrUpdate\" : {\n                        \"type\" : \"date\"                                      \n                       \n                    }\n                       \n            } \n    } \n}\n</code></pre>\n</li>\n<li>\n<p>数据初始化</p>\n<ul>\n<li>\n<p><code>datax</code> 用于初始化数据量较大的表，如 <code>library_books</code></p>\n<ul>\n<li>\n<pre><code class=\"language-shell\">python datax.py libraryBooks.json\n</code></pre>\n</li>\n</ul>\n</li>\n<li>\n<p><code>logstash</code> 用于持续同步数据</p>\n<ul>\n<li>\n<pre><code class=\"language-shell\">Logstash:usr/local/elk/logstash/mysql.conf 下yuntu-library-books.cfg, yuntu-librarys.cfg 的index 值\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>es 索引别名替换, HTTP <code>POST</code>请求</p>\n<ul>\n<li>\n<p><a href=\"http://47.106.164.212:9200/_aliases\">http://47.106.164.212:9200/_aliases</a></p>\n</li>\n<li>\n<pre><code class=\"language-json\">{\n   \"actions\" : [\n        { \"remove\" : \n         \t{ \n                \"index\" : \"yuntu_library_books_v1\", \n                \"alias\" : \"yuntu_library_books\" \n            } \n        },\n        { \"add\" : \n         \t{ \n                \"index\" : \"yuntu_library_books_v2\", \n                \"alias\" : \"yuntu_library_books\" \n            } \n        }\n    ]\n}\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"share\" style=\"position:relative;\"><a href=\"#share\" aria-label=\"share permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Share</h2>\n<h3 id=\"chinese-translation-of-netty-4x-user-guide-中文翻译netty-4x-用户指南\" style=\"position:relative;\"><a href=\"#chinese-translation-of-netty-4x-user-guide-%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91netty-4x-%E7%94%A8%E6%88%B7%E6%8C%87%E5%8D%97\" aria-label=\"chinese translation of netty 4x user guide 中文翻译netty 4x 用户指南 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/waylau/netty-4-user-guide\">Chinese translation of Netty 4.x User Guide. 中文翻译《Netty 4.x 用户指南》</a></h3>\n<p>中文版 netty user guide 作为参考</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#algorithm\">Algorithm</a></p>\n</li>\n<li>\n<p><a href=\"#review\">Review</a></p>\n<ul>\n<li><a href=\"#netty-user-guide\">Netty User guide</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#tip\">Tip</a></p>\n<ul>\n<li><a href=\"#%E4%BD%BF%E7%94%A8-datax-%E5%B0%86-mysql-%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5-elasticsearch\">使用 datax 将 mysql 数据导入 elasticsearch</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#share\">Share</a></p>\n<ul>\n<li><a href=\"#chinese-translation-of-netty-4x-user-guide-%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91netty-4x-%E7%94%A8%E6%88%B7%E6%8C%87%E5%8D%97\">Chinese translation of Netty 4.x User Guide. 中文翻译《Netty 4.x 用户指南》</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"ARTS 第24周","tags":["coding","arts"],"description":"Algorithm, Reiview, Tip and Share","date":"2018-12-15"}}},"pageContext":{"slug":"/arts-24/","previous":{"fields":{"slug":"/arts-23/"},"frontmatter":{"title":"ARTS 第23周","tags":["coding","arts"],"slug":""}},"next":{"fields":{"slug":"/arts-25/"},"frontmatter":{"title":"ARTS 第25周","tags":["coding","arts"],"slug":""}}}},"staticQueryHashes":["2052298874"],"slicesMap":{}}