{"expireTime":9007200811185001000,"key":"transformer-remark-markdown-ast-6b34cc905dd523df525dbfea4d26a5c9-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"ARTS05-20180804","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":18,"offset":18},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":18,"offset":18},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Algorithm","position":{"start":{"line":4,"column":4,"offset":23},"end":{"line":4,"column":13,"offset":32},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":20},"end":{"line":4,"column":13,"offset":32},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Longest Palindromic Substring","position":{"start":{"line":6,"column":5,"offset":38},"end":{"line":6,"column":34,"offset":67},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":34},"end":{"line":6,"column":34,"offset":67},"indent":[]}},{"type":"html","lang":"java","value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>leetcode<span class=\"token punctuation\">.</span>solution</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * 5. Longest Palindromic Substring\n * &lt;p>\n * Given a string s, find the longest palindromic substring in s.\n * &lt;p>\n * You may assume that the maximum length of s is 1000.\n * &lt;p>\n * Example 1:\n * Input: \"babad\"\n * Output: \"bab\"\n * Note: \"aba\" is also a valid answer.\n * &lt;p>\n * Example 2:\n * Input: \"cbbd\"\n * Output: \"bb\"\n *\n * @author jason\n * @date 18/8/4.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LongestPalindromicSubstring</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">String</span> <span class=\"token function\">longestPalindrome</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> s<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> s<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">boolean</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> palindrome <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">boolean</span><span class=\"token punctuation\">[</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> result <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> maxLength <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">-</span> i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">2</span> <span class=\"token operator\">||</span> palindrome<span class=\"token punctuation\">[</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    palindrome<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>maxLength <span class=\"token operator\">&lt;</span> j <span class=\"token operator\">-</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                        maxLength <span class=\"token operator\">=</span> j <span class=\"token operator\">-</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n                        result <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LongestPalindromicSubstring</span><span class=\"token punctuation\">.</span><span class=\"token function\">longestPalindrome</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LongestPalindromicSubstring</span><span class=\"token punctuation\">.</span><span class=\"token function\">longestPalindrome</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"aa\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LongestPalindromicSubstring</span><span class=\"token punctuation\">.</span><span class=\"token function\">longestPalindrome</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"aaa\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LongestPalindromicSubstring</span><span class=\"token punctuation\">.</span><span class=\"token function\">longestPalindrome</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cbbd\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LongestPalindromicSubstring</span><span class=\"token punctuation\">.</span><span class=\"token function\">longestPalindrome</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"babad\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":8,"column":1,"offset":69},"end":{"line":61,"column":4,"offset":1739},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Review","position":{"start":{"line":63,"column":4,"offset":1744},"end":{"line":63,"column":10,"offset":1750},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":1741},"end":{"line":63,"column":10,"offset":1750},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Demystifying Dynamic Programming","position":{"start":{"line":65,"column":5,"offset":1756},"end":{"line":65,"column":37,"offset":1788},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":1752},"end":{"line":65,"column":37,"offset":1788},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://medium.freecodecamp.org/demystifying-dynamic-programming-3efafb8d4296","children":[{"type":"text","value":"https://medium.freecodecamp.org/demystifying-dynamic-programming-3efafb8d4296","position":{"start":{"line":67,"column":3,"offset":1792},"end":{"line":67,"column":80,"offset":1869},"indent":[]}}],"position":{"start":{"line":67,"column":3,"offset":1792},"end":{"line":67,"column":80,"offset":1869},"indent":[]}}],"position":{"start":{"line":67,"column":3,"offset":1792},"end":{"line":67,"column":80,"offset":1869},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Demystifying Dynamic Programming","position":{"start":{"line":69,"column":3,"offset":1874},"end":{"line":69,"column":35,"offset":1906},"indent":[]}}],"position":{"start":{"line":69,"column":3,"offset":1874},"end":{"line":69,"column":35,"offset":1906},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"How to construct & code dynamic programming algorithms","position":{"start":{"line":71,"column":3,"offset":1911},"end":{"line":71,"column":57,"offset":1965},"indent":[]}}],"position":{"start":{"line":71,"column":3,"offset":1911},"end":{"line":71,"column":57,"offset":1965},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":1790},"end":{"line":71,"column":57,"offset":1965},"indent":[1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Dynamic Programming Defined","position":{"start":{"line":73,"column":6,"offset":1972},"end":{"line":73,"column":33,"offset":1999},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":1967},"end":{"line":73,"column":33,"offset":1999},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Dynamic programming amounts to breaking down an optimization problem into simpler sub-problems, and storing the solution to each sub-problem so that each sub-problem is only solved once.","position":{"start":{"line":75,"column":1,"offset":2001},"end":{"line":75,"column":187,"offset":2187},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":2001},"end":{"line":75,"column":187,"offset":2187},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Sub-problems on Sub-problems on Sub-problems","position":{"start":{"line":77,"column":6,"offset":2194},"end":{"line":77,"column":50,"offset":2238},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":2189},"end":{"line":77,"column":50,"offset":2238},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Sub-problems are smaller versions of the original problem. In fact, sub-problems often look like a reworded version of the original problem. If formulated correctly, sub-problems build on each other in order to obtain the solution to the original problem.","position":{"start":{"line":79,"column":1,"offset":2240},"end":{"line":79,"column":256,"offset":2495},"indent":[]}}],"position":{"start":{"line":79,"column":1,"offset":2240},"end":{"line":79,"column":256,"offset":2495},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Dynamic Programming Process","position":{"start":{"line":81,"column":6,"offset":2502},"end":{"line":81,"column":33,"offset":2529},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":2497},"end":{"line":81,"column":33,"offset":2529},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Step 1: Identify the sub-problem in words.\nStep 2: Write out the sub-problem as a recurring mathematical decision.\nStep 3: Solve the original problem using Steps 1 and 2.\nStep 4: Determine the dimensions of the memoization array and the direction in which it should be filled.\nStep 5: Code it!","position":{"start":{"line":83,"column":1,"offset":2531},"end":{"line":87,"column":17,"offset":2824},"indent":[1,1,1,1]}}],"position":{"start":{"line":83,"column":1,"offset":2531},"end":{"line":87,"column":17,"offset":2824},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Tip","position":{"start":{"line":89,"column":4,"offset":2829},"end":{"line":89,"column":7,"offset":2832},"indent":[]}}],"position":{"start":{"line":89,"column":1,"offset":2826},"end":{"line":89,"column":7,"offset":2832},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Docker spring boot 项目使用位于容器外（宿主机）的配置文件","position":{"start":{"line":91,"column":5,"offset":2838},"end":{"line":91,"column":43,"offset":2876},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":2834},"end":{"line":91,"column":43,"offset":2876},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"springboot 允许我们把配置文件放置在与jar文件同路径的config目录下，结合docker的数据卷挂载，可以把容器内的config目录映射到宿主机的指定目录下，从而实现容器内的项目使用宿主机目录下的配置文件。","position":{"start":{"line":93,"column":3,"offset":2880},"end":{"line":93,"column":113,"offset":2990},"indent":[]}}],"position":{"start":{"line":93,"column":3,"offset":2880},"end":{"line":93,"column":113,"offset":2990},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":2878},"end":{"line":93,"column":113,"offset":2990},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"pom.xml dockerfile 插件配置","position":{"start":{"line":95,"column":1,"offset":2992},"end":{"line":95,"column":24,"offset":3015},"indent":[]}}],"position":{"start":{"line":95,"column":1,"offset":2992},"end":{"line":95,"column":24,"offset":3015},"indent":[]}},{"type":"html","lang":"xml","value":"<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugin</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>com.spotify<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>dockerfile-maven-plugin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.4.3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>repository</span><span class=\"token punctuation\">></span></span>192.168.28.121:9090/my-service<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>repository</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tag</span><span class=\"token punctuation\">></span></span>${project.version}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tag</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>useMavenSettingsForAuth</span><span class=\"token punctuation\">></span></span>true<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>useMavenSettingsForAuth</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>buildArgs</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>JAR_FILE</span><span class=\"token punctuation\">></span></span>target/${project.build.finalName}.jar<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>JAR_FILE</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>buildArgs</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugin</span><span class=\"token punctuation\">></span></span></code></pre></div>","position":{"start":{"line":97,"column":1,"offset":3017},"end":{"line":111,"column":4,"offset":3482},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"在项目根目录下编写 Dockerfile 文件，命名为 ","position":{"start":{"line":113,"column":1,"offset":3484},"end":{"line":113,"column":29,"offset":3512},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">Dockerfile</code>","position":{"start":{"line":113,"column":29,"offset":3512},"end":{"line":113,"column":41,"offset":3524},"indent":[]}}],"position":{"start":{"line":113,"column":1,"offset":3484},"end":{"line":113,"column":41,"offset":3524},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">FROM frolvlad/alpine-oraclejdk8:latest\nARG JAR_FILE\nADD ${JAR_FILE} /usr/local/my-service/app.jar\nRUN mkdir /usr/local/my-service/config\nENTRYPOINT [&quot;java&quot;,&quot;-Djava.security.egd=file:/dev/./urandom&quot;,&quot;-jar&quot;,&quot;/usr/local/my-service/app.jar&quot;, &quot;--spring.config.location=/usr/local/my-service/config/application.properties&quot;]</code></pre></div>","position":{"start":{"line":115,"column":1,"offset":3526},"end":{"line":121,"column":4,"offset":3851},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"运行docker容器，使用 -v 参数挂载数据卷，指定容器外配置文件的目录，例如：","position":{"start":{"line":123,"column":1,"offset":3853},"end":{"line":123,"column":42,"offset":3894},"indent":[]}}],"position":{"start":{"line":123,"column":1,"offset":3853},"end":{"line":123,"column":42,"offset":3894},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker run -it -p 8080:8080 -v /Users/jason/my-service/config/:/usr/local/my-service/config/ 192.168.28.121:9090/my-service:1.0</code></pre></div>","position":{"start":{"line":125,"column":1,"offset":3896},"end":{"line":127,"column":4,"offset":4031},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"上面的例子中 ","position":{"start":{"line":129,"column":1,"offset":4033},"end":{"line":129,"column":8,"offset":4040},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">-v /Users/jason/my-service/config/:/usr/local/my-service/config/</code>","position":{"start":{"line":129,"column":8,"offset":4040},"end":{"line":129,"column":74,"offset":4106},"indent":[]}},{"type":"text","value":" 冒号左边的路径代表的是宿主机，冒号右边的路径代表的是docker 容器内的路径","position":{"start":{"line":129,"column":74,"offset":4106},"end":{"line":129,"column":114,"offset":4146},"indent":[]}}],"position":{"start":{"line":129,"column":1,"offset":4033},"end":{"line":129,"column":114,"offset":4146},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Share","position":{"start":{"line":132,"column":4,"offset":4152},"end":{"line":132,"column":9,"offset":4157},"indent":[]}}],"position":{"start":{"line":132,"column":1,"offset":4149},"end":{"line":132,"column":9,"offset":4157},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Jenkins Pipeline script","position":{"start":{"line":134,"column":5,"offset":4163},"end":{"line":134,"column":28,"offset":4186},"indent":[]}}],"position":{"start":{"line":134,"column":1,"offset":4159},"end":{"line":134,"column":28,"offset":4186},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Node：一个Node就是一个Jenkins节点，可以是Master，也可以是Slave，是Pipeline中具体Step的运行环境。","position":{"start":{"line":136,"column":1,"offset":4188},"end":{"line":136,"column":68,"offset":4255},"indent":[]}}],"position":{"start":{"line":136,"column":1,"offset":4188},"end":{"line":136,"column":68,"offset":4255},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Stage：一个Pipeline有多个Stage组成，每个Stage包含一组Step。注意一个Stage可以跨多个Node执行，即Stage实际上是Step的逻辑分组。","position":{"start":{"line":138,"column":1,"offset":4257},"end":{"line":138,"column":85,"offset":4341},"indent":[]}}],"position":{"start":{"line":138,"column":1,"offset":4257},"end":{"line":138,"column":85,"offset":4341},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Step：是最基本的运行单元，可以是创建一个目录、从代码库中checkout代码、执行一个shell命令、构建Docker镜像、将服务发布到Kubernetes集群中。Step由Jenkins和Jenkins各种插件提供。","position":{"start":{"line":140,"column":1,"offset":4343},"end":{"line":140,"column":112,"offset":4454},"indent":[]}}],"position":{"start":{"line":140,"column":1,"offset":4343},"end":{"line":140,"column":112,"offset":4454},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"将node、stage、step的Groovy DSL写在一个Jenkinsfile文件中，Jenkinsfile会被放到代码库的根目录下。下面是一个Jenkinsfile的Helloworld的例子：","position":{"start":{"line":142,"column":1,"offset":4456},"end":{"line":142,"column":102,"offset":4557},"indent":[]}}],"position":{"start":{"line":142,"column":1,"offset":4456},"end":{"line":142,"column":102,"offset":4557},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">node {\n   stage(&#39;prepare&#39;) {\n       echo &#39;prepare step1&#39;\n       echo &#39;prepare step2&#39;\n   }\n   stage(&#39;build&#39;) {\n       echo &#39;build step1&#39;\n       echo &#39;build step2&#39;\n   }\n   stage(&#39;deploy&#39;) {\n       echo &#39;deploy step1&#39;\n       echo &#39;deploy step2&#39;\n   }\n}</code></pre></div>","position":{"start":{"line":144,"column":1,"offset":4559},"end":{"line":159,"column":4,"offset":4815},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"下面是一个实际使用的例子，从gitlab检出代码，使用maven命令打包，构建docker镜像并推送到镜像仓库，然后使用ssh连接到测试服务器运行docker容器","position":{"start":{"line":161,"column":1,"offset":4817},"end":{"line":161,"column":82,"offset":4898},"indent":[]}}],"position":{"start":{"line":161,"column":1,"offset":4817},"end":{"line":161,"column":82,"offset":4898},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">node {\n    stage(&#39;Checkout From Gitlab&#39;) {\n        git credentialsId: &#39;gitlab-passwd&#39;, url: &#39;http://192.168.28.216/yuntu/eureka-server.git&#39;, branch: &#39;dev&#39;\n    }\n\n    stage(&#39;Maven Install&#39;){\n        def mvnHome = tool name: &#39;maven3&#39;, type: &#39;maven&#39;\n        def mvnCMD = &quot;${mvnHome}/bin/mvn&quot;\n        sh &quot;${mvnCMD} clean install&quot;\n    }\n\n\n    stage(&#39;Build And Push Docker Image&#39;){\n        def mvnHome = tool name: &#39;maven3&#39;, type: &#39;maven&#39;\n        def mvnCMD = &quot;${mvnHome}/bin/mvn&quot;\n        sh &quot;${mvnCMD} dockerfile:build&quot;\n        sh &quot;${mvnCMD} dockerfile:push&quot;\n    }\n\n    stage(&#39;Run Docker Container On Test Server&#39;){\n        def dockerLogin = &#39;docker login -u admin -p admin123 192.168.28.121:9090&#39;\n        def dockerPull = &#39;docker  pull 192.168.28.121:9090/eureka-server:1.0&#39;\n        def dockerStop = &#39;docker stop eureka-server&#39;\n        def dockerRm = &#39;docker rm eureka-server&#39;\n        def dockerRun = &#39;docker run -p 1112:1111 --name eureka-server -d 192.168.28.121:9090/eureka-server:1.0&#39;\n        sshagent([&#39;jason-local-vm&#39;]) {\n            sh &quot;ssh -o StrictHostKeyChecking=no jason@192.168.28.121 ${dockerLogin}&quot;\n            sh &quot;ssh -o StrictHostKeyChecking=no jason@192.168.28.121 ${dockerPull}&quot;\n            sh &quot;ssh -o StrictHostKeyChecking=no jason@192.168.28.121 ${dockerStop}&quot;\n            sh &quot;ssh -o StrictHostKeyChecking=no jason@192.168.28.121 ${dockerRm}&quot;\n            sh &quot;ssh -o StrictHostKeyChecking=no jason@192.168.28.121 ${dockerRun}&quot;\n        }\n    }\n}</code></pre></div>","position":{"start":{"line":163,"column":1,"offset":4900},"end":{"line":198,"column":4,"offset":6367},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":199,"column":1,"offset":6368}}}}