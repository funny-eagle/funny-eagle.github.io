{"expireTime":9007200810530857000,"key":"transformer-remark-markdown-ast-64bff9b4d7b9a6ac9355509c37231c75-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"ARTS05-20180804","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":18,"offset":17},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":18,"offset":17},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Algorithm","position":{"start":{"line":3,"column":4,"offset":22},"end":{"line":3,"column":13,"offset":31},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":19},"end":{"line":3,"column":13,"offset":31},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Longest Palindromic Substring","position":{"start":{"line":5,"column":5,"offset":37},"end":{"line":5,"column":34,"offset":66},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":33},"end":{"line":5,"column":34,"offset":66},"indent":[]}},{"type":"html","lang":"java","value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>leetcode<span class=\"token punctuation\">.</span>solution</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * 5. Longest Palindromic Substring\n * &lt;p>\n * Given a string s, find the longest palindromic substring in s.\n * &lt;p>\n * You may assume that the maximum length of s is 1000.\n * &lt;p>\n * Example 1:\n * Input: \"babad\"\n * Output: \"bab\"\n * Note: \"aba\" is also a valid answer.\n * &lt;p>\n * Example 2:\n * Input: \"cbbd\"\n * Output: \"bb\"\n *\n * @author jason\n * @date 18/8/4.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LongestPalindromicSubstring</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">String</span> <span class=\"token function\">longestPalindrome</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> s<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> s<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">boolean</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> palindrome <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">boolean</span><span class=\"token punctuation\">[</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> result <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> maxLength <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">-</span> i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">2</span> <span class=\"token operator\">||</span> palindrome<span class=\"token punctuation\">[</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    palindrome<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>maxLength <span class=\"token operator\">&lt;</span> j <span class=\"token operator\">-</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                        maxLength <span class=\"token operator\">=</span> j <span class=\"token operator\">-</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n                        result <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LongestPalindromicSubstring</span><span class=\"token punctuation\">.</span><span class=\"token function\">longestPalindrome</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LongestPalindromicSubstring</span><span class=\"token punctuation\">.</span><span class=\"token function\">longestPalindrome</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"aa\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LongestPalindromicSubstring</span><span class=\"token punctuation\">.</span><span class=\"token function\">longestPalindrome</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"aaa\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LongestPalindromicSubstring</span><span class=\"token punctuation\">.</span><span class=\"token function\">longestPalindrome</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cbbd\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LongestPalindromicSubstring</span><span class=\"token punctuation\">.</span><span class=\"token function\">longestPalindrome</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"babad\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":7,"column":1,"offset":68},"end":{"line":60,"column":4,"offset":1738},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Review","position":{"start":{"line":62,"column":4,"offset":1743},"end":{"line":62,"column":10,"offset":1749},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":1740},"end":{"line":62,"column":10,"offset":1749},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Demystifying Dynamic Programming","position":{"start":{"line":64,"column":5,"offset":1755},"end":{"line":64,"column":37,"offset":1787},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":1751},"end":{"line":64,"column":37,"offset":1787},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://medium.freecodecamp.org/demystifying-dynamic-programming-3efafb8d4296","children":[{"type":"text","value":"https://medium.freecodecamp.org/demystifying-dynamic-programming-3efafb8d4296","position":{"start":{"line":66,"column":3,"offset":1791},"end":{"line":66,"column":80,"offset":1868},"indent":[]}}],"position":{"start":{"line":66,"column":3,"offset":1791},"end":{"line":66,"column":80,"offset":1868},"indent":[]}}],"position":{"start":{"line":66,"column":3,"offset":1791},"end":{"line":66,"column":80,"offset":1868},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Demystifying Dynamic Programming","position":{"start":{"line":68,"column":3,"offset":1873},"end":{"line":68,"column":35,"offset":1905},"indent":[]}}],"position":{"start":{"line":68,"column":3,"offset":1873},"end":{"line":68,"column":35,"offset":1905},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"How to construct & code dynamic programming algorithms","position":{"start":{"line":70,"column":3,"offset":1910},"end":{"line":70,"column":57,"offset":1964},"indent":[]}}],"position":{"start":{"line":70,"column":3,"offset":1910},"end":{"line":70,"column":57,"offset":1964},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":1789},"end":{"line":70,"column":57,"offset":1964},"indent":[1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Dynamic Programming Defined","position":{"start":{"line":72,"column":6,"offset":1971},"end":{"line":72,"column":33,"offset":1998},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":1966},"end":{"line":72,"column":33,"offset":1998},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Dynamic programming amounts to breaking down an optimization problem into simpler sub-problems, and storing the solution to each sub-problem so that each sub-problem is only solved once.","position":{"start":{"line":74,"column":1,"offset":2000},"end":{"line":74,"column":187,"offset":2186},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":2000},"end":{"line":74,"column":187,"offset":2186},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Sub-problems on Sub-problems on Sub-problems","position":{"start":{"line":76,"column":6,"offset":2193},"end":{"line":76,"column":50,"offset":2237},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":2188},"end":{"line":76,"column":50,"offset":2237},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Sub-problems are smaller versions of the original problem. In fact, sub-problems often look like a reworded version of the original problem. If formulated correctly, sub-problems build on each other in order to obtain the solution to the original problem.","position":{"start":{"line":78,"column":1,"offset":2239},"end":{"line":78,"column":256,"offset":2494},"indent":[]}}],"position":{"start":{"line":78,"column":1,"offset":2239},"end":{"line":78,"column":256,"offset":2494},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Dynamic Programming Process","position":{"start":{"line":80,"column":6,"offset":2501},"end":{"line":80,"column":33,"offset":2528},"indent":[]}}],"position":{"start":{"line":80,"column":1,"offset":2496},"end":{"line":80,"column":33,"offset":2528},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Step 1: Identify the sub-problem in words.\nStep 2: Write out the sub-problem as a recurring mathematical decision.\nStep 3: Solve the original problem using Steps 1 and 2.\nStep 4: Determine the dimensions of the memoization array and the direction in which it should be filled.\nStep 5: Code it!","position":{"start":{"line":82,"column":1,"offset":2530},"end":{"line":86,"column":17,"offset":2823},"indent":[1,1,1,1]}}],"position":{"start":{"line":82,"column":1,"offset":2530},"end":{"line":86,"column":17,"offset":2823},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Tip","position":{"start":{"line":88,"column":4,"offset":2828},"end":{"line":88,"column":7,"offset":2831},"indent":[]}}],"position":{"start":{"line":88,"column":1,"offset":2825},"end":{"line":88,"column":7,"offset":2831},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Docker spring boot 项目使用位于容器外（宿主机）的配置文件","position":{"start":{"line":90,"column":5,"offset":2837},"end":{"line":90,"column":43,"offset":2875},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":2833},"end":{"line":90,"column":43,"offset":2875},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"springboot 允许我们把配置文件放置在与jar文件同路径的config目录下，结合docker的数据卷挂载，可以把容器内的config目录映射到宿主机的指定目录下，从而实现容器内的项目使用宿主机目录下的配置文件。","position":{"start":{"line":92,"column":3,"offset":2879},"end":{"line":92,"column":113,"offset":2989},"indent":[]}}],"position":{"start":{"line":92,"column":3,"offset":2879},"end":{"line":92,"column":113,"offset":2989},"indent":[]}}],"position":{"start":{"line":92,"column":1,"offset":2877},"end":{"line":92,"column":113,"offset":2989},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"pom.xml dockerfile 插件配置","position":{"start":{"line":94,"column":1,"offset":2991},"end":{"line":94,"column":24,"offset":3014},"indent":[]}}],"position":{"start":{"line":94,"column":1,"offset":2991},"end":{"line":94,"column":24,"offset":3014},"indent":[]}},{"type":"html","lang":"xml","value":"<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugin</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>com.spotify<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>dockerfile-maven-plugin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.4.3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>repository</span><span class=\"token punctuation\">></span></span>192.168.28.121:9090/my-service<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>repository</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tag</span><span class=\"token punctuation\">></span></span>${project.version}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tag</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>useMavenSettingsForAuth</span><span class=\"token punctuation\">></span></span>true<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>useMavenSettingsForAuth</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>buildArgs</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>JAR_FILE</span><span class=\"token punctuation\">></span></span>target/${project.build.finalName}.jar<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>JAR_FILE</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>buildArgs</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugin</span><span class=\"token punctuation\">></span></span></code></pre></div>","position":{"start":{"line":96,"column":1,"offset":3016},"end":{"line":110,"column":4,"offset":3481},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"在项目根目录下编写 Dockerfile 文件，命名为 ","position":{"start":{"line":112,"column":1,"offset":3483},"end":{"line":112,"column":29,"offset":3511},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">Dockerfile</code>","position":{"start":{"line":112,"column":29,"offset":3511},"end":{"line":112,"column":41,"offset":3523},"indent":[]}}],"position":{"start":{"line":112,"column":1,"offset":3483},"end":{"line":112,"column":41,"offset":3523},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">FROM frolvlad/alpine-oraclejdk8:latest\nARG JAR_FILE\nADD ${JAR_FILE} /usr/local/my-service/app.jar\nRUN mkdir /usr/local/my-service/config\nENTRYPOINT [&quot;java&quot;,&quot;-Djava.security.egd=file:/dev/./urandom&quot;,&quot;-jar&quot;,&quot;/usr/local/my-service/app.jar&quot;, &quot;--spring.config.location=/usr/local/my-service/config/application.properties&quot;]</code></pre></div>","position":{"start":{"line":114,"column":1,"offset":3525},"end":{"line":120,"column":4,"offset":3850},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"运行docker容器，使用 -v 参数挂载数据卷，指定容器外配置文件的目录，例如：","position":{"start":{"line":122,"column":1,"offset":3852},"end":{"line":122,"column":42,"offset":3893},"indent":[]}}],"position":{"start":{"line":122,"column":1,"offset":3852},"end":{"line":122,"column":42,"offset":3893},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker run -it -p 8080:8080 -v /Users/jason/my-service/config/:/usr/local/my-service/config/ 192.168.28.121:9090/my-service:1.0</code></pre></div>","position":{"start":{"line":124,"column":1,"offset":3895},"end":{"line":126,"column":4,"offset":4030},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"上面的例子中 ","position":{"start":{"line":128,"column":1,"offset":4032},"end":{"line":128,"column":8,"offset":4039},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">-v /Users/jason/my-service/config/:/usr/local/my-service/config/</code>","position":{"start":{"line":128,"column":8,"offset":4039},"end":{"line":128,"column":74,"offset":4105},"indent":[]}},{"type":"text","value":" 冒号左边的路径代表的是宿主机，冒号右边的路径代表的是docker 容器内的路径","position":{"start":{"line":128,"column":74,"offset":4105},"end":{"line":128,"column":114,"offset":4145},"indent":[]}}],"position":{"start":{"line":128,"column":1,"offset":4032},"end":{"line":128,"column":114,"offset":4145},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Share","position":{"start":{"line":131,"column":4,"offset":4151},"end":{"line":131,"column":9,"offset":4156},"indent":[]}}],"position":{"start":{"line":131,"column":1,"offset":4148},"end":{"line":131,"column":9,"offset":4156},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Jenkins Pipeline script","position":{"start":{"line":133,"column":5,"offset":4162},"end":{"line":133,"column":28,"offset":4185},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":4158},"end":{"line":133,"column":28,"offset":4185},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Node：一个Node就是一个Jenkins节点，可以是Master，也可以是Slave，是Pipeline中具体Step的运行环境。","position":{"start":{"line":135,"column":1,"offset":4187},"end":{"line":135,"column":68,"offset":4254},"indent":[]}}],"position":{"start":{"line":135,"column":1,"offset":4187},"end":{"line":135,"column":68,"offset":4254},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Stage：一个Pipeline有多个Stage组成，每个Stage包含一组Step。注意一个Stage可以跨多个Node执行，即Stage实际上是Step的逻辑分组。","position":{"start":{"line":137,"column":1,"offset":4256},"end":{"line":137,"column":85,"offset":4340},"indent":[]}}],"position":{"start":{"line":137,"column":1,"offset":4256},"end":{"line":137,"column":85,"offset":4340},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Step：是最基本的运行单元，可以是创建一个目录、从代码库中checkout代码、执行一个shell命令、构建Docker镜像、将服务发布到Kubernetes集群中。Step由Jenkins和Jenkins各种插件提供。","position":{"start":{"line":139,"column":1,"offset":4342},"end":{"line":139,"column":112,"offset":4453},"indent":[]}}],"position":{"start":{"line":139,"column":1,"offset":4342},"end":{"line":139,"column":112,"offset":4453},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"将node、stage、step的Groovy DSL写在一个Jenkinsfile文件中，Jenkinsfile会被放到代码库的根目录下。下面是一个Jenkinsfile的Helloworld的例子：","position":{"start":{"line":141,"column":1,"offset":4455},"end":{"line":141,"column":102,"offset":4556},"indent":[]}}],"position":{"start":{"line":141,"column":1,"offset":4455},"end":{"line":141,"column":102,"offset":4556},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">node {\n   stage(&#39;prepare&#39;) {\n       echo &#39;prepare step1&#39;\n       echo &#39;prepare step2&#39;\n   }\n   stage(&#39;build&#39;) {\n       echo &#39;build step1&#39;\n       echo &#39;build step2&#39;\n   }\n   stage(&#39;deploy&#39;) {\n       echo &#39;deploy step1&#39;\n       echo &#39;deploy step2&#39;\n   }\n}</code></pre></div>","position":{"start":{"line":143,"column":1,"offset":4558},"end":{"line":158,"column":4,"offset":4814},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"下面是一个实际使用的例子，从gitlab检出代码，使用maven命令打包，构建docker镜像并推送到镜像仓库，然后使用ssh连接到测试服务器运行docker容器","position":{"start":{"line":160,"column":1,"offset":4816},"end":{"line":160,"column":82,"offset":4897},"indent":[]}}],"position":{"start":{"line":160,"column":1,"offset":4816},"end":{"line":160,"column":82,"offset":4897},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">node {\n    stage(&#39;Checkout From Gitlab&#39;) {\n        git credentialsId: &#39;gitlab-passwd&#39;, url: &#39;http://192.168.28.216/yuntu/eureka-server.git&#39;, branch: &#39;dev&#39;\n    }\n\n    stage(&#39;Maven Install&#39;){\n        def mvnHome = tool name: &#39;maven3&#39;, type: &#39;maven&#39;\n        def mvnCMD = &quot;${mvnHome}/bin/mvn&quot;\n        sh &quot;${mvnCMD} clean install&quot;\n    }\n\n\n    stage(&#39;Build And Push Docker Image&#39;){\n        def mvnHome = tool name: &#39;maven3&#39;, type: &#39;maven&#39;\n        def mvnCMD = &quot;${mvnHome}/bin/mvn&quot;\n        sh &quot;${mvnCMD} dockerfile:build&quot;\n        sh &quot;${mvnCMD} dockerfile:push&quot;\n    }\n\n    stage(&#39;Run Docker Container On Test Server&#39;){\n        def dockerLogin = &#39;docker login -u admin -p admin123 192.168.28.121:9090&#39;\n        def dockerPull = &#39;docker  pull 192.168.28.121:9090/eureka-server:1.0&#39;\n        def dockerStop = &#39;docker stop eureka-server&#39;\n        def dockerRm = &#39;docker rm eureka-server&#39;\n        def dockerRun = &#39;docker run -p 1112:1111 --name eureka-server -d 192.168.28.121:9090/eureka-server:1.0&#39;\n        sshagent([&#39;jason-local-vm&#39;]) {\n            sh &quot;ssh -o StrictHostKeyChecking=no jason@192.168.28.121 ${dockerLogin}&quot;\n            sh &quot;ssh -o StrictHostKeyChecking=no jason@192.168.28.121 ${dockerPull}&quot;\n            sh &quot;ssh -o StrictHostKeyChecking=no jason@192.168.28.121 ${dockerStop}&quot;\n            sh &quot;ssh -o StrictHostKeyChecking=no jason@192.168.28.121 ${dockerRm}&quot;\n            sh &quot;ssh -o StrictHostKeyChecking=no jason@192.168.28.121 ${dockerRun}&quot;\n        }\n    }\n}</code></pre></div>","position":{"start":{"line":162,"column":1,"offset":4899},"end":{"line":197,"column":4,"offset":6366},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":198,"column":1,"offset":6367}}}}