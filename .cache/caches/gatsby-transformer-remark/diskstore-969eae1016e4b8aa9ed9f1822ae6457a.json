{"expireTime":9007200810530857000,"key":"transformer-remark-markdown-ast-acbd3f4beec97c66ee036d4168afe662-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"heading","depth":4,"children":[{"type":"text","value":"什么是反向代理","position":{"start":{"line":1,"column":6,"offset":5},"end":{"line":1,"column":13,"offset":12},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":13,"offset":12},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"反向代理","position":{"start":{"line":3,"column":3,"offset":16},"end":{"line":3,"column":7,"offset":20},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":14},"end":{"line":3,"column":9,"offset":22},"indent":[]}},{"type":"text","value":"（Reverse Proxy）方式是指用代理服务器来接受 internet 上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给 internet 上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。","position":{"start":{"line":3,"column":9,"offset":22},"end":{"line":3,"column":130,"offset":143},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":14},"end":{"line":3,"column":130,"offset":143},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"举个例子，一个用户访问 ","position":{"start":{"line":5,"column":1,"offset":145},"end":{"line":5,"column":13,"offset":157},"indent":[]}},{"type":"link","title":null,"url":"http://www.example.com/readme","children":[{"type":"text","value":"http://www.example.com/readme","position":{"start":{"line":5,"column":14,"offset":158},"end":{"line":5,"column":43,"offset":187},"indent":[]}}],"position":{"start":{"line":5,"column":13,"offset":157},"end":{"line":5,"column":75,"offset":219},"indent":[]}},{"type":"text","value":"，但是 www.example.com 上并不存在 readme 页面，它是偷偷从另外一台服务器上取回来，然后作为自己的内容返回给用户。但是用户并不知情这个过程。对用户来说，就像是直接从 www.example.com 获取 readme 页面一样。这里所提到的 www.example.com 这个域名对应的服务器就设置了反向代理功能。","position":{"start":{"line":5,"column":75,"offset":219},"end":{"line":5,"column":244,"offset":388},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":145},"end":{"line":5,"column":244,"offset":388},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"反向代理服务器，对于客户端而言它就像是原始服务器，并且客户端不需要进行任何特别的设置。客户端向反向代理的命名空间(name-space)中的内容发送普通请求，接着反向代理将判断向何处(原始服务器)转交请求，并将获得的内容返回给客户端，就像这些内容原本就是它自己的一样。如下图所示：","position":{"start":{"line":7,"column":1,"offset":390},"end":{"line":7,"column":141,"offset":530},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":390},"end":{"line":7,"column":141,"offset":530},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"https://raw.githubusercontent.com/jasonyang86/nocoder/master/data/images/201806/proxy.png","alt":null,"position":{"start":{"line":9,"column":1,"offset":532},"end":{"line":9,"column":95,"offset":626},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":532},"end":{"line":9,"column":95,"offset":626},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"反向代理典型应用场景","position":{"start":{"line":11,"column":6,"offset":633},"end":{"line":11,"column":16,"offset":643},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":628},"end":{"line":11,"column":16,"offset":643},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"反向代理的典型用途是将防火墙后面的服务器提供给 Internet 用户访问，加强安全防护。反向代理还可以为后端的多台服务器提供负载均衡，或为后端较慢的服务器提供 ","position":{"start":{"line":13,"column":1,"offset":645},"end":{"line":13,"column":82,"offset":726},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"缓冲","position":{"start":{"line":13,"column":84,"offset":728},"end":{"line":13,"column":86,"offset":730},"indent":[]}}],"position":{"start":{"line":13,"column":82,"offset":726},"end":{"line":13,"column":88,"offset":732},"indent":[]}},{"type":"text","value":" 服务。另外，反向代理还可以启用高级 URL 策略和管理技术，从而使处于不同 web 服务器系统的 web 页面同时存在于同一个 URL 空间下。","position":{"start":{"line":13,"column":88,"offset":732},"end":{"line":13,"column":161,"offset":805},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":645},"end":{"line":13,"column":161,"offset":805},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Nginx 的其中一个用途是做 HTTP 反向代理，下面简单介绍 Nginx 作为反向代理服务器的方法。","position":{"start":{"line":15,"column":1,"offset":807},"end":{"line":15,"column":53,"offset":859},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":807},"end":{"line":15,"column":53,"offset":859},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"场景描述：访问本地服务器上的 README.md 文件 ","position":{"start":{"line":17,"column":2,"offset":862},"end":{"line":17,"column":30,"offset":890},"indent":[]}},{"type":"link","title":null,"url":"http://localhost/README.md","children":[{"type":"text","value":"http://localhost/README.md","position":{"start":{"line":17,"column":31,"offset":891},"end":{"line":17,"column":57,"offset":917},"indent":[]}}],"position":{"start":{"line":17,"column":30,"offset":890},"end":{"line":17,"column":86,"offset":946},"indent":[]}},{"type":"text","value":"，本地服务器进行反向代理，从 ","position":{"start":{"line":17,"column":86,"offset":946},"end":{"line":17,"column":101,"offset":961},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/moonbingbing/openresty-best-practices/blob/master/README.md","children":[{"type":"text","value":"https://github.com/moonbingbing/openresty-best-practices/blob/master/README.md","position":{"start":{"line":17,"column":102,"offset":962},"end":{"line":17,"column":180,"offset":1040},"indent":[]}}],"position":{"start":{"line":17,"column":101,"offset":961},"end":{"line":17,"column":261,"offset":1121},"indent":[]}},{"type":"text","value":" 获取页面内容。","position":{"start":{"line":17,"column":261,"offset":1121},"end":{"line":17,"column":269,"offset":1129},"indent":[]}}],"position":{"start":{"line":17,"column":2,"offset":862},"end":{"line":17,"column":269,"offset":1129},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":861},"end":{"line":17,"column":269,"offset":1129},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">nginx.conf</code>","position":{"start":{"line":19,"column":1,"offset":1131},"end":{"line":19,"column":13,"offset":1143},"indent":[]}},{"type":"text","value":" 配置示例：","position":{"start":{"line":19,"column":13,"offset":1143},"end":{"line":19,"column":19,"offset":1149},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":1131},"end":{"line":19,"column":19,"offset":1149},"indent":[]}},{"type":"html","lang":"nginx","value":"<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token keyword\">worker_processes</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">pid</span> logs<span class=\"token operator\">/</span>nginx<span class=\"token punctuation\">.</span><span class=\"token keyword\">pid</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">error_log</span> logs<span class=\"token operator\">/</span>error<span class=\"token punctuation\">.</span>log warn<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">events</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">worker_connections</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">http</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">include</span> mime<span class=\"token punctuation\">.</span><span class=\"token keyword\">types</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">server_tokens</span> off<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">## 下面配置反向代理的参数</span>\n    <span class=\"token keyword\">server</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">listen</span>    <span class=\"token number\">8866</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">## 1. 用户访问 http://ip:port，则反向代理到 https://github.com</span>\n        <span class=\"token keyword\">location</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">proxy_pass</span>  <span class=\"token keyword\">https</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>github<span class=\"token punctuation\">.</span>com<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_redirect</span>     off<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_set_header</span>   Host             <span class=\"token variable\">$host</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_set_header</span>   X<span class=\"token operator\">-</span>Real<span class=\"token operator\">-</span>IP        <span class=\"token variable\">$remote_addr</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_set_header</span>   X<span class=\"token operator\">-</span>Forwarded<span class=\"token operator\">-</span>For  <span class=\"token variable\">$proxy_add_x_forwarded_for</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">## 2.用户访问 http://ip:port/README.md，则反向代理到</span>\n        <span class=\"token comment\">##   https://github.com/.../README.md</span>\n        <span class=\"token keyword\">location</span> <span class=\"token operator\">/</span>README<span class=\"token punctuation\">.</span>md <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">proxy_set_header</span>  X<span class=\"token operator\">-</span>Real<span class=\"token operator\">-</span>IP  <span class=\"token variable\">$remote_addr</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Forwarded<span class=\"token operator\">-</span>For <span class=\"token variable\">$proxy_add_x_forwarded_for</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_pass</span> <span class=\"token keyword\">https</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>moonbingbing<span class=\"token operator\">/</span>openresty<span class=\"token operator\">-</span>best<span class=\"token operator\">-</span>practices<span class=\"token operator\">/</span>blob<span class=\"token operator\">/</span>master<span class=\"token operator\">/</span>README<span class=\"token punctuation\">.</span>md<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":21,"column":1,"offset":1151},"end":{"line":57,"column":4,"offset":2126},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"成功启动 Nginx 后，我们打开浏览器，验证下反向代理的效果。在浏览器地址栏中输入 ","position":{"start":{"line":59,"column":1,"offset":2128},"end":{"line":59,"column":44,"offset":2171},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">localhost/README.md</code>","position":{"start":{"line":59,"column":44,"offset":2171},"end":{"line":59,"column":65,"offset":2192},"indent":[]}},{"type":"text","value":"，返回的结果是我们 GitHub 源代码的 README 页面。如下图：","position":{"start":{"line":59,"column":65,"offset":2192},"end":{"line":59,"column":101,"offset":2228},"indent":[]}}],"position":{"start":{"line":59,"column":1,"offset":2128},"end":{"line":59,"column":101,"offset":2228},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"https://raw.githubusercontent.com/moonbingbing/openresty-best-practices/master/images/proxy_example.png","alt":null,"position":{"start":{"line":61,"column":1,"offset":2230},"end":{"line":61,"column":109,"offset":2338},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":2230},"end":{"line":61,"column":109,"offset":2338},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"我们只需要配置一下 ","position":{"start":{"line":63,"column":1,"offset":2340},"end":{"line":63,"column":11,"offset":2350},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">nginx.conf</code>","position":{"start":{"line":63,"column":11,"offset":2350},"end":{"line":63,"column":23,"offset":2362},"indent":[]}},{"type":"text","value":" 文件，不用写任何 web 页面，就可以偷偷地从别的服务器上读取一个页面返回给用户。","position":{"start":{"line":63,"column":23,"offset":2362},"end":{"line":63,"column":65,"offset":2404},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":2340},"end":{"line":63,"column":65,"offset":2404},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"下面我们来看一下 ","position":{"start":{"line":65,"column":1,"offset":2406},"end":{"line":65,"column":10,"offset":2415},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">nginx.conf</code>","position":{"start":{"line":65,"column":10,"offset":2415},"end":{"line":65,"column":22,"offset":2427},"indent":[]}},{"type":"text","value":" 里用到的配置项：","position":{"start":{"line":65,"column":22,"offset":2427},"end":{"line":65,"column":31,"offset":2436},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":2406},"end":{"line":65,"column":31,"offset":2436},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"(1) location","position":{"start":{"line":67,"column":1,"offset":2438},"end":{"line":67,"column":13,"offset":2450},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":2438},"end":{"line":67,"column":13,"offset":2450},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"location 项对请求 URI 进行匹配，location 后面配置了匹配规则。例如上面的例子中，如果请求的 URI 是 ","position":{"start":{"line":69,"column":1,"offset":2452},"end":{"line":69,"column":64,"offset":2515},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">localhost/</code>","position":{"start":{"line":69,"column":64,"offset":2515},"end":{"line":69,"column":76,"offset":2527},"indent":[]}},{"type":"text","value":"，则会匹配 ","position":{"start":{"line":69,"column":76,"offset":2527},"end":{"line":69,"column":82,"offset":2533},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">location /</code>","position":{"start":{"line":69,"column":82,"offset":2533},"end":{"line":69,"column":94,"offset":2545},"indent":[]}},{"type":"text","value":" 这一项；如果请求的 URI 是 ","position":{"start":{"line":69,"column":94,"offset":2545},"end":{"line":69,"column":111,"offset":2562},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">localhost/README.md</code>","position":{"start":{"line":69,"column":111,"offset":2562},"end":{"line":69,"column":132,"offset":2583},"indent":[]}},{"type":"text","value":"，则会匹配 ","position":{"start":{"line":69,"column":132,"offset":2583},"end":{"line":69,"column":138,"offset":2589},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">location /README.md</code>","position":{"start":{"line":69,"column":138,"offset":2589},"end":{"line":69,"column":159,"offset":2610},"indent":[]}},{"type":"text","value":" 这项。","position":{"start":{"line":69,"column":159,"offset":2610},"end":{"line":69,"column":163,"offset":2614},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":2452},"end":{"line":69,"column":163,"offset":2614},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"上面这个例子只是针对一个确定的 URI 做了反向代理，有的读者会有疑惑：如果对每个页面都进行这样的配置，那将会大量重复，能否做 ","position":{"start":{"line":71,"column":1,"offset":2616},"end":{"line":71,"column":65,"offset":2680},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"批量","position":{"start":{"line":71,"column":67,"offset":2682},"end":{"line":71,"column":69,"offset":2684},"indent":[]}}],"position":{"start":{"line":71,"column":65,"offset":2680},"end":{"line":71,"column":71,"offset":2686},"indent":[]}},{"type":"text","value":" 配置呢？此时需要配合使用 location 的正则匹配功能。具体实现方法可参考 Nginx 文档中 ","position":{"start":{"line":71,"column":71,"offset":2686},"end":{"line":71,"column":122,"offset":2737},"indent":[]}},{"type":"link","title":null,"url":"http://nginx.org/en/docs/http/ngx_http_core_module.html#location","children":[{"type":"text","value":"关于 location 的描述","position":{"start":{"line":71,"column":123,"offset":2738},"end":{"line":71,"column":138,"offset":2753},"indent":[]}}],"position":{"start":{"line":71,"column":122,"offset":2737},"end":{"line":71,"column":205,"offset":2820},"indent":[]}},{"type":"text","value":"。","position":{"start":{"line":71,"column":205,"offset":2820},"end":{"line":71,"column":206,"offset":2821},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":2616},"end":{"line":71,"column":206,"offset":2821},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"(2) proxy_pass","position":{"start":{"line":73,"column":1,"offset":2823},"end":{"line":73,"column":15,"offset":2837},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":2823},"end":{"line":73,"column":15,"offset":2837},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"proxy","position":{"start":{"line":75,"column":1,"offset":2839},"end":{"line":75,"column":6,"offset":2844},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"pass 后面跟着一个 URL，用来将请求反向代理到 URL 参数指定的服务器上。例如我们上面例子中的 `proxy","position":{"start":{"line":75,"column":7,"offset":2845},"end":{"line":75,"column":65,"offset":2903},"indent":[]}}],"position":{"start":{"line":75,"column":6,"offset":2844},"end":{"line":75,"column":66,"offset":2904},"indent":[]}},{"type":"text","value":"pass ","position":{"start":{"line":75,"column":66,"offset":2904},"end":{"line":75,"column":71,"offset":2909},"indent":[]}},{"type":"link","title":null,"url":"https://github.com`，则将匹配的请求反向代理到","children":[{"type":"text","value":"https://github.com`，则将匹配的请求反向代理到","position":{"start":{"line":75,"column":71,"offset":2909},"end":{"line":75,"column":103,"offset":2941},"indent":[]}}],"position":{"start":{"line":75,"column":71,"offset":2909},"end":{"line":75,"column":103,"offset":2941},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":75,"column":103,"offset":2941},"end":{"line":75,"column":104,"offset":2942},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">https://github.com</code>","position":{"start":{"line":75,"column":104,"offset":2942},"end":{"line":75,"column":124,"offset":2962},"indent":[]}},{"type":"text","value":"。","position":{"start":{"line":75,"column":124,"offset":2962},"end":{"line":75,"column":125,"offset":2963},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":2839},"end":{"line":75,"column":125,"offset":2963},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"(3) proxy","position":{"start":{"line":77,"column":1,"offset":2965},"end":{"line":77,"column":10,"offset":2974},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"set","position":{"start":{"line":77,"column":11,"offset":2975},"end":{"line":77,"column":14,"offset":2978},"indent":[]}}],"position":{"start":{"line":77,"column":10,"offset":2974},"end":{"line":77,"column":15,"offset":2979},"indent":[]}},{"type":"text","value":"header","position":{"start":{"line":77,"column":15,"offset":2979},"end":{"line":77,"column":21,"offset":2985},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":2965},"end":{"line":77,"column":21,"offset":2985},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"默认情况下，反向代理不会转发原始请求中的 Host 头部，如果需要转发，就需要加上这句：","position":{"start":{"line":79,"column":1,"offset":2987},"end":{"line":79,"column":45,"offset":3031},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">proxy_set_header Host $host;</code>","position":{"start":{"line":79,"column":45,"offset":3031},"end":{"line":79,"column":75,"offset":3061},"indent":[]}}],"position":{"start":{"line":79,"column":1,"offset":2987},"end":{"line":79,"column":75,"offset":3061},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"除了上面提到的常用配置项，还有 proxy","position":{"start":{"line":81,"column":1,"offset":3063},"end":{"line":81,"column":22,"offset":3084},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"redirect、proxy","position":{"start":{"line":81,"column":23,"offset":3085},"end":{"line":81,"column":37,"offset":3099},"indent":[]}}],"position":{"start":{"line":81,"column":22,"offset":3084},"end":{"line":81,"column":38,"offset":3100},"indent":[]}},{"type":"text","value":"set","position":{"start":{"line":81,"column":38,"offset":3100},"end":{"line":81,"column":41,"offset":3103},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"body、proxy","position":{"start":{"line":81,"column":42,"offset":3104},"end":{"line":81,"column":52,"offset":3114},"indent":[]}}],"position":{"start":{"line":81,"column":41,"offset":3103},"end":{"line":81,"column":53,"offset":3115},"indent":[]}},{"type":"text","value":"limit","position":{"start":{"line":81,"column":53,"offset":3115},"end":{"line":81,"column":58,"offset":3120},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"rate 等参数，具体用法可以到","position":{"start":{"line":81,"column":59,"offset":3121},"end":{"line":81,"column":75,"offset":3137},"indent":[]}},{"type":"linkReference","identifier":"nginx 官网","referenceType":"shortcut","children":[{"type":"text","value":"Nginx 官网","position":{"start":{"line":81,"column":76,"offset":3138},"end":{"line":81,"column":84,"offset":3146},"indent":[]}}],"position":{"start":{"line":81,"column":75,"offset":3137},"end":{"line":81,"column":85,"offset":3147},"indent":[]}},{"type":"text","value":"(","position":{"start":{"line":81,"column":85,"offset":3147},"end":{"line":81,"column":86,"offset":3148},"indent":[]}},{"type":"link","title":null,"url":"http://nginx.org/en/docs/http/ngx","children":[{"type":"text","value":"http://nginx.org/en/docs/http/ngx","position":{"start":{"line":81,"column":86,"offset":3148},"end":{"line":81,"column":119,"offset":3181},"indent":[]}}],"position":{"start":{"line":81,"column":86,"offset":3148},"end":{"line":81,"column":119,"offset":3181},"indent":[]}}],"position":{"start":{"line":81,"column":58,"offset":3120},"end":{"line":81,"column":120,"offset":3182},"indent":[]}},{"type":"text","value":"http","position":{"start":{"line":81,"column":120,"offset":3182},"end":{"line":81,"column":124,"offset":3186},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"proxy","position":{"start":{"line":81,"column":125,"offset":3187},"end":{"line":81,"column":130,"offset":3192},"indent":[]}}],"position":{"start":{"line":81,"column":124,"offset":3186},"end":{"line":81,"column":131,"offset":3193},"indent":[]}},{"type":"text","value":"module.html)查看。","position":{"start":{"line":81,"column":131,"offset":3193},"end":{"line":81,"column":146,"offset":3208},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":3063},"end":{"line":81,"column":146,"offset":3208},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"正向代理","position":{"start":{"line":83,"column":6,"offset":3215},"end":{"line":83,"column":10,"offset":3219},"indent":[]}}],"position":{"start":{"line":83,"column":1,"offset":3210},"end":{"line":83,"column":10,"offset":3219},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"既然有反向代理，自然也有正向代理。简单来说，正向代理就像一个跳板，例如一个用户访问不了某网站（例如 ","position":{"start":{"line":85,"column":1,"offset":3221},"end":{"line":85,"column":51,"offset":3271},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">www.google.com</code>","position":{"start":{"line":85,"column":51,"offset":3271},"end":{"line":85,"column":67,"offset":3287},"indent":[]}},{"type":"text","value":"），但是他能访问一个代理服务器，这个代理服务器能访问 ","position":{"start":{"line":85,"column":67,"offset":3287},"end":{"line":85,"column":94,"offset":3314},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">www.google.com</code>","position":{"start":{"line":85,"column":94,"offset":3314},"end":{"line":85,"column":110,"offset":3330},"indent":[]}},{"type":"text","value":"，于是用户可以先连上代理服务器，告诉它需要访问的内容，代理服务器去取回来返回给用户。例如一些常见的翻墙工具、游戏代理就是利用正向代理的原理工作的，我们需要在这些正向代理工具上配置服务器的 IP 地址等信息。","position":{"start":{"line":85,"column":110,"offset":3330},"end":{"line":85,"column":213,"offset":3433},"indent":[]}}],"position":{"start":{"line":85,"column":1,"offset":3221},"end":{"line":85,"column":213,"offset":3433},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":86,"column":1,"offset":3434}}}}