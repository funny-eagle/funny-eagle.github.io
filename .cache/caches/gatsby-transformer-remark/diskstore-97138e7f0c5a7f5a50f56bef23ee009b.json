{"expireTime":9007200811185013000,"key":"transformer-remark-markdown-html-a2de8396c751899d9cd1094f6c5551ce-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":"<h1>ARTS06-20180811</h1>\n<h2>Algorithm</h2>\n<h3>6. ZigZag Conversion</h3>\n<p>The string <code class=\"language-text\">&quot;PAYPALISHIRING&quot;</code> is written in a zigzag pattern on a given number of rows like this: (you may want to display this pattern in a fixed font for better legibility)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">P   A   H   N\nA P L S I I G\nY   I   R</code></pre></div>\n<p>And then read line by line: <code class=\"language-text\">&quot;PAHNAPLSIIGYIR&quot;</code></p>\n<p>Write the code that will take a string and make this conversion given a number of rows:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">string convert(string s, int numRows);</code></pre></div>\n<p><strong>Example 1:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Input: s = &quot;PAYPALISHIRING&quot;, numRows = 3\nOutput: &quot;PAHNAPLSIIGYIR&quot;</code></pre></div>\n<p><strong>Example 2:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Input: s = &quot;PAYPALISHIRING&quot;, numRows = 4\nOutput: &quot;PINALSIGYAHRPI&quot;\nExplanation:\n\nP     I    N\nA   L S  I G\nY A   H R\nP     I</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>leetcode<span class=\"token punctuation\">.</span>solution</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * 6. ZigZag Conversion\n *\n * The string \"PAYPALISHIRING\" is written in a zigzag pattern on a given number of rows like this: (you may want to display this pattern in a fixed font for better legibility)\n *\n * P   A   H   N\n * A P L S I I G\n * Y   I   R\n * And then read line by line: \"PAHNAPLSIIGYIR\"\n *\n * Write the code that will take a string and make this conversion given a number of rows:\n *\n * string convert(string s, int numRows);\n * Example 1:\n *\n * Input: s = \"PAYPALISHIRING\", numRows = 3\n * Output: \"PAHNAPLSIIGYIR\"\n * Example 2:\n *\n * Input: s = \"PAYPALISHIRING\", numRows = 4\n * Output: \"PINALSIGYAHRPI\"\n * Explanation:\n *\n * P     I    N\n * A   L S  I G\n * Y A   H R\n * P     I\n *\n * @author jason\n * @date 18/8/12.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ZigZagConversion</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">convert</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> s<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> nRows<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> nRows <span class=\"token operator\">&lt;=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> s<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token class-name\">StringBuilder</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> size <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> nRows <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> nRows<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">+=</span> size<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                res<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">!=</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> i <span class=\"token operator\">!=</span> nRows <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">int</span> temp <span class=\"token operator\">=</span> j <span class=\"token operator\">+</span> size <span class=\"token operator\">-</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> i<span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>temp <span class=\"token operator\">&lt;</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                        res<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Review</h2>\n<h3>google chrome now labels http sites as ‘not secure’</h3>\n<p><a href=\"https://www.wired.com/story/google-chrome-https-not-secure-label/\">https://www.wired.com/story/google-chrome-https-not-secure-label/</a></p>\n<p>两年前，谷歌实现了一个承诺，chrome浏览器在未加密的网站前面贴上警告标志，来标识非https网站为不安全网站。</p>\n<p>但是居然还有骂声，“他们只是科技行业，网络比科技行业大得多，这就是傲慢。“来自Dave Winer，他是RSS的创造者之一。</p>\n<p>Let’s Encrypt 提供了支持HTTPS连接的免费证书，并且已加密超过1.13亿个网站。</p>\n<h2>Tip</h2>\n<h3>Docker 容器多目录挂载</h3>\n<p>项目的配置文件，日志，以及要写入的文件，不要直接写在docker container 内部，因为一旦镜像更新要运行新的容器或者容器被删除，那么容器写入到内部的文件内容会丢失，所以这些需要挂载到宿主机上以保证数据的持久化。</p>\n<p>目录挂载的使用非常容易，只需要遭docker run 命令后跟 <code class=\"language-text\">-v</code> 参数加上&#x3C;宿主机目录路径>:&#x3C;容器内目录路径>即可， 多个目录的挂载就使用 多个 <code class=\"language-text\">-v</code> 参数加上&#x3C;宿主机目录路径>:&#x3C;容器内目录路径></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker run -it -p 8080:8080 -v /Users/jason/my-service/config/:/usr/local/my-service/config/ -v  /Users/jason/my-service/log:/usr/local/my-service/log 192.168.28.121:9090/my-service:1.0</code></pre></div>\n<p>使用docker-compose的话在docker-compose.yml中增加<code class=\"language-text\">volumes: - &quot;/source:/destination&quot;</code>即可。</p>\n<h2>Share</h2>\n<h3>分享一下我们现在的负载流程，使用阿里负载均衡加nginx代理转发</h3>\n<p>项目是采用DDD设计理念，前后端分离，前端使用vue.js，后端是基于springboot的多模块项目，大体分为web层和core层，web层负责处理客户端请求，core层包括domain和repository。每个项目使用两台server来运行docker化的web和core，也就是说运行了两个web，两个core。注册中心使用eureka。\n接下来描述一下负载均衡配合nginx代理转发的工作流程：\n首先请求会到负载均衡服务器，然后到nginx8080端口，如果是静态资源，则proxy_pass 到CDN，CDN回源到nginx80端口的web-front目录下，初次访问的时候从这里获取资源，缓存到CDN以加速客户端访问；如果是接口，则到对应的web层，然后到core层。</p>\n<p><img src=\"https://raw.githubusercontent.com/yangjinlong86/nocoder/master/data/images/201808/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1.png\"></p>"}