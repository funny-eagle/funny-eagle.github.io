{"expireTime":9007200811185013000,"key":"transformer-remark-markdown-ast-a2de8396c751899d9cd1094f6c5551ce-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"ARTS06-20180811","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":18,"offset":18},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":18,"offset":18},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Algorithm","position":{"start":{"line":4,"column":4,"offset":23},"end":{"line":4,"column":13,"offset":32},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":20},"end":{"line":4,"column":13,"offset":32},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"6. ZigZag Conversion","position":{"start":{"line":6,"column":5,"offset":38},"end":{"line":6,"column":25,"offset":58},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":34},"end":{"line":6,"column":25,"offset":58},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The string ","position":{"start":{"line":8,"column":1,"offset":60},"end":{"line":8,"column":12,"offset":71},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">&quot;PAYPALISHIRING&quot;</code>","position":{"start":{"line":8,"column":12,"offset":71},"end":{"line":8,"column":30,"offset":89},"indent":[]}},{"type":"text","value":" is written in a zigzag pattern on a given number of rows like this: (you may want to display this pattern in a fixed font for better legibility)","position":{"start":{"line":8,"column":30,"offset":89},"end":{"line":8,"column":175,"offset":234},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":60},"end":{"line":8,"column":175,"offset":234},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">P   A   H   N\nA P L S I I G\nY   I   R</code></pre></div>","position":{"start":{"line":10,"column":1,"offset":236},"end":{"line":14,"column":4,"offset":281},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"And then read line by line: ","position":{"start":{"line":16,"column":1,"offset":283},"end":{"line":16,"column":29,"offset":311},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">&quot;PAHNAPLSIIGYIR&quot;</code>","position":{"start":{"line":16,"column":29,"offset":311},"end":{"line":16,"column":47,"offset":329},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":283},"end":{"line":16,"column":47,"offset":329},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Write the code that will take a string and make this conversion given a number of rows:","position":{"start":{"line":18,"column":1,"offset":331},"end":{"line":18,"column":88,"offset":418},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":331},"end":{"line":18,"column":88,"offset":418},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">string convert(string s, int numRows);</code></pre></div>","position":{"start":{"line":20,"column":1,"offset":420},"end":{"line":22,"column":4,"offset":466},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Example 1:","position":{"start":{"line":24,"column":3,"offset":470},"end":{"line":24,"column":13,"offset":480},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":468},"end":{"line":24,"column":15,"offset":482},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":468},"end":{"line":24,"column":15,"offset":482},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Input: s = &quot;PAYPALISHIRING&quot;, numRows = 3\nOutput: &quot;PAHNAPLSIIGYIR&quot;</code></pre></div>","position":{"start":{"line":26,"column":1,"offset":484},"end":{"line":29,"column":4,"offset":557},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Example 2:","position":{"start":{"line":31,"column":3,"offset":561},"end":{"line":31,"column":13,"offset":571},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":559},"end":{"line":31,"column":15,"offset":573},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":559},"end":{"line":31,"column":15,"offset":573},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Input: s = &quot;PAYPALISHIRING&quot;, numRows = 4\nOutput: &quot;PINALSIGYAHRPI&quot;\nExplanation:\n\nP     I    N\nA   L S  I G\nY A   H R\nP     I</code></pre></div>","position":{"start":{"line":33,"column":1,"offset":575},"end":{"line":42,"column":4,"offset":706},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"html","lang":"java","value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>leetcode<span class=\"token punctuation\">.</span>solution</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * 6. ZigZag Conversion\n *\n * The string \"PAYPALISHIRING\" is written in a zigzag pattern on a given number of rows like this: (you may want to display this pattern in a fixed font for better legibility)\n *\n * P   A   H   N\n * A P L S I I G\n * Y   I   R\n * And then read line by line: \"PAHNAPLSIIGYIR\"\n *\n * Write the code that will take a string and make this conversion given a number of rows:\n *\n * string convert(string s, int numRows);\n * Example 1:\n *\n * Input: s = \"PAYPALISHIRING\", numRows = 3\n * Output: \"PAHNAPLSIIGYIR\"\n * Example 2:\n *\n * Input: s = \"PAYPALISHIRING\", numRows = 4\n * Output: \"PINALSIGYAHRPI\"\n * Explanation:\n *\n * P     I    N\n * A   L S  I G\n * Y A   H R\n * P     I\n *\n * @author jason\n * @date 18/8/12.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ZigZagConversion</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">convert</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> s<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> nRows<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> nRows <span class=\"token operator\">&lt;=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> s<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token class-name\">StringBuilder</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> size <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> nRows <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> nRows<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">+=</span> size<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                res<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">!=</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> i <span class=\"token operator\">!=</span> nRows <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">int</span> temp <span class=\"token operator\">=</span> j <span class=\"token operator\">+</span> size <span class=\"token operator\">-</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> i<span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>temp <span class=\"token operator\">&lt;</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                        res<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":44,"column":1,"offset":708},"end":{"line":101,"column":4,"offset":2191},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Review","position":{"start":{"line":103,"column":4,"offset":2196},"end":{"line":103,"column":10,"offset":2202},"indent":[]}}],"position":{"start":{"line":103,"column":1,"offset":2193},"end":{"line":103,"column":10,"offset":2202},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"google chrome now labels http sites as ‘not secure’","position":{"start":{"line":105,"column":5,"offset":2208},"end":{"line":105,"column":56,"offset":2259},"indent":[]}}],"position":{"start":{"line":105,"column":1,"offset":2204},"end":{"line":105,"column":56,"offset":2259},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://www.wired.com/story/google-chrome-https-not-secure-label/","children":[{"type":"text","value":"https://www.wired.com/story/google-chrome-https-not-secure-label/","position":{"start":{"line":107,"column":1,"offset":2261},"end":{"line":107,"column":66,"offset":2326},"indent":[]}}],"position":{"start":{"line":107,"column":1,"offset":2261},"end":{"line":107,"column":66,"offset":2326},"indent":[]}}],"position":{"start":{"line":107,"column":1,"offset":2261},"end":{"line":107,"column":66,"offset":2326},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"两年前，谷歌实现了一个承诺，chrome浏览器在未加密的网站前面贴上警告标志，来标识非https网站为不安全网站。","position":{"start":{"line":109,"column":1,"offset":2328},"end":{"line":109,"column":58,"offset":2385},"indent":[]}}],"position":{"start":{"line":109,"column":1,"offset":2328},"end":{"line":109,"column":58,"offset":2385},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"但是居然还有骂声，“他们只是科技行业，网络比科技行业大得多，这就是傲慢。“来自Dave Winer，他是RSS的创造者之一。","position":{"start":{"line":111,"column":1,"offset":2387},"end":{"line":111,"column":63,"offset":2449},"indent":[]}}],"position":{"start":{"line":111,"column":1,"offset":2387},"end":{"line":111,"column":63,"offset":2449},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Let’s Encrypt 提供了支持HTTPS连接的免费证书，并且已加密超过1.13亿个网站。","position":{"start":{"line":113,"column":1,"offset":2451},"end":{"line":113,"column":49,"offset":2499},"indent":[]}}],"position":{"start":{"line":113,"column":1,"offset":2451},"end":{"line":113,"column":49,"offset":2499},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Tip","position":{"start":{"line":116,"column":4,"offset":2505},"end":{"line":116,"column":7,"offset":2508},"indent":[]}}],"position":{"start":{"line":116,"column":1,"offset":2502},"end":{"line":116,"column":7,"offset":2508},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Docker 容器多目录挂载","position":{"start":{"line":118,"column":5,"offset":2514},"end":{"line":118,"column":19,"offset":2528},"indent":[]}}],"position":{"start":{"line":118,"column":1,"offset":2510},"end":{"line":118,"column":19,"offset":2528},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"项目的配置文件，日志，以及要写入的文件，不要直接写在docker container 内部，因为一旦镜像更新要运行新的容器或者容器被删除，那么容器写入到内部的文件内容会丢失，所以这些需要挂载到宿主机上以保证数据的持久化。","position":{"start":{"line":120,"column":1,"offset":2530},"end":{"line":120,"column":111,"offset":2640},"indent":[]}}],"position":{"start":{"line":120,"column":1,"offset":2530},"end":{"line":120,"column":111,"offset":2640},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"目录挂载的使用非常容易，只需要遭docker run 命令后跟 ","position":{"start":{"line":122,"column":1,"offset":2642},"end":{"line":122,"column":33,"offset":2674},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">-v</code>","position":{"start":{"line":122,"column":33,"offset":2674},"end":{"line":122,"column":37,"offset":2678},"indent":[]}},{"type":"text","value":" 参数加上<宿主机目录路径>:<容器内目录路径>即可， 多个目录的挂载就使用 多个 ","position":{"start":{"line":122,"column":37,"offset":2678},"end":{"line":122,"column":79,"offset":2720},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">-v</code>","position":{"start":{"line":122,"column":79,"offset":2720},"end":{"line":122,"column":83,"offset":2724},"indent":[]}},{"type":"text","value":" 参数加上<宿主机目录路径>:<容器内目录路径>","position":{"start":{"line":122,"column":83,"offset":2724},"end":{"line":122,"column":107,"offset":2748},"indent":[]}}],"position":{"start":{"line":122,"column":1,"offset":2642},"end":{"line":122,"column":107,"offset":2748},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker run -it -p 8080:8080 -v /Users/jason/my-service/config/:/usr/local/my-service/config/ -v  /Users/jason/my-service/log:/usr/local/my-service/log 192.168.28.121:9090/my-service:1.0</code></pre></div>","position":{"start":{"line":124,"column":1,"offset":2750},"end":{"line":126,"column":4,"offset":2943},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"使用docker-compose的话在docker-compose.yml中增加","position":{"start":{"line":128,"column":1,"offset":2945},"end":{"line":128,"column":41,"offset":2985},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">volumes: - &quot;/source:/destination&quot;</code>","position":{"start":{"line":128,"column":41,"offset":2985},"end":{"line":128,"column":76,"offset":3020},"indent":[]}},{"type":"text","value":"即可。","position":{"start":{"line":128,"column":76,"offset":3020},"end":{"line":128,"column":79,"offset":3023},"indent":[]}}],"position":{"start":{"line":128,"column":1,"offset":2945},"end":{"line":128,"column":79,"offset":3023},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Share","position":{"start":{"line":130,"column":4,"offset":3028},"end":{"line":130,"column":9,"offset":3033},"indent":[]}}],"position":{"start":{"line":130,"column":1,"offset":3025},"end":{"line":130,"column":9,"offset":3033},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"分享一下我们现在的负载流程，使用阿里负载均衡加nginx代理转发","position":{"start":{"line":132,"column":5,"offset":3039},"end":{"line":132,"column":37,"offset":3071},"indent":[]}}],"position":{"start":{"line":132,"column":1,"offset":3035},"end":{"line":132,"column":37,"offset":3071},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"项目是采用DDD设计理念，前后端分离，前端使用vue.js，后端是基于springboot的多模块项目，大体分为web层和core层，web层负责处理客户端请求，core层包括domain和repository。每个项目使用两台server来运行docker化的web和core，也就是说运行了两个web，两个core。注册中心使用eureka。\n接下来描述一下负载均衡配合nginx代理转发的工作流程：\n首先请求会到负载均衡服务器，然后到nginx8080端口，如果是静态资源，则proxy_pass 到CDN，CDN回源到nginx80端口的web-front目录下，初次访问的时候从这里获取资源，缓存到CDN以加速客户端访问；如果是接口，则到对应的web层，然后到core层。","position":{"start":{"line":134,"column":1,"offset":3073},"end":{"line":136,"column":139,"offset":3414},"indent":[1,1]}}],"position":{"start":{"line":134,"column":1,"offset":3073},"end":{"line":136,"column":139,"offset":3414},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"https://raw.githubusercontent.com/yangjinlong86/nocoder/master/data/images/201808/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1.png","alt":null,"position":{"start":{"line":138,"column":1,"offset":3416},"end":{"line":138,"column":128,"offset":3543},"indent":[]}}],"position":{"start":{"line":138,"column":1,"offset":3416},"end":{"line":138,"column":128,"offset":3543},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":139,"column":1,"offset":3544}}}}